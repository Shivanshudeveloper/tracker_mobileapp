(this["webpackJsonpreact-material-dashboard"]=this["webpackJsonpreact-material-dashboard"]||[]).push([[0],{366:function(e,t,a){},367:function(e,t,a){"use strict";a.r(t);var n=a(63),c=a.n(n),r=a(46),s=a(29),o=a(2),i=a.n(o),l=a(4),u=(a(281),a(27)),d=a(454),j=a(504),p=a(455),b=a(434),h=Object(p.a)((function(){return Object(b.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),m=function(){return h(),null},O=a(240),f=Object(O.a)({palette:{background:{default:"#f4f6f8",paper:"#ffffff"},primary:{contrastText:"#ffffff",main:"#5664d2"},text:{primary:"#172b4d",secondary:"#6b778c"}},shadows:["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],typography:{h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}}}),x=a(8),g=a(6),v=a(1),y=a.n(v),S=a(11),w=a(18),C=a(244),k=a(475),N=a(477),D=a(478),I=a(479),A=a(481),E=a(482),L=a(462),T=a(483),P=a(467),_=a(442),M=a(443),G=a(218),F=a.n(G),H=a(220),z=a.n(H),U=a(217),W=a(242),B=a(36),R=a(20),J=a(108),V=Object(U.a)({apiKey:"AIzaSyCB3eqMf02L6kH_F7MAuwXUQVd1dFZfVFQ",authDomain:"mobiletracking-cd8f2.firebaseapp.com",databaseURL:"https://mobiletracking-cd8f2.firebaseio.com",projectId:"mobiletracking-cd8f2",storageBucket:"mobiletracking-cd8f2.appspot.com",messagingSenderId:"448981545000",appId:"1:448981545000:web:14011a88c4a6079456051d",measurementId:"G-M9EEMS9J5G"}),Y=(Object(W.a)(V),Object(R.h)(V)),q=Object(B.c)(V),K=Object(J.b)(V),Z=a(55),X=a.n(Z),Q=a(221),$=a.n(Q),ee=a(0),te=["onMobileNavOpen"],ae=function(e){e.onMobileNavOpen;var t=Object(C.a)(e,te),a=Object(v.useState)([]),n=Object(x.a)(a,2),c=n[0],s=n[1],o=Object(v.useState)(null),i=Object(x.a)(o,2),l=i[0],d=i[1],j=Object(v.useState)(!1),p=Object(x.a)(j,2),b=p[0],h=p[1],m=Object(u.g)(),O=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null;Object(v.useEffect)((function(){sessionStorage.getItem("authToken")||m("/login")}),[]),Object(v.useEffect)((function(){if(null!==O){var e=Object(R.c)(Y,"trackingWebNotification",null===O||void 0===O?void 0:O.uid,"notifications"),t=Object(R.l)(e,Object(R.k)("createdAt","desc"),Object(R.i)(100)),a=Object(R.j)(t,(function(e){var t=[];e.forEach((function(e){t.push(e.data())})),s(t)}));return function(){return a()}}}),[]);var f=function(e){var t=X()(new Date(1e3*e)).fromNow();switch(t){case"in a few seconds":case"a few seconds ago":return"few sec";case"a minute ago":return"1m";case"an hour ago":return"1h";case"a day ago":return"1day";default:var a=t.split(" ")[0],n=t.split(" ")[1];return"minutes"!==n&&"minute"!==n||(n="m"),"hours"!==n&&"hour"!==n||(n="h"),"days"!==n&&"day"!==n||(n="d"),a+n}};return Object(ee.jsx)(k.a,Object(w.a)(Object(w.a)({elevation:0},t),{},{children:Object(ee.jsxs)(N.a,{sx:{backgroundColor:"#007bff",display:"flex",justifyContent:"flex-end",gap:1},children:[Object(ee.jsx)(D.a,{onClick:function(e){d(e.currentTarget),h(!0)},children:Object(ee.jsx)(F.a,{sx:{color:"white"}})}),Object(ee.jsx)(I.a,{id:"notification",open:b,anchorEl:l,onClose:function(){d(null),h(!1)},anchorOrigin:{vertical:"bottom",horizontal:"left"},className:"notification",children:Object(ee.jsx)(A.a,{sx:{padding:2},children:c.map((function(e,t){return Object(ee.jsxs)(E.a,{style:{padding:2},children:[Object(ee.jsxs)(L.a,{sx:{mt:1.5},children:[Object(ee.jsxs)(T.a,{children:["pending"===e.requestStatus&&Object(ee.jsx)(P.a,{src:"https://firebasestorage.googleapis.com/v0/b/mobiletracking-cd8f2.appspot.com/o/pending.png?alt=media&token=20afc88a-6914-4657-962e-ba9d5e684ae5"}),"accepted"===e.requestStatus&&Object(ee.jsx)(P.a,{src:"https://firebasestorage.googleapis.com/v0/b/mobiletracking-cd8f2.appspot.com/o/accept.png?alt=media&token=83902429-f4af-40b8-852c-faca1e144a92"}),"rejected"===e.requestStatus&&Object(ee.jsx)(P.a,{src:"https://firebasestorage.googleapis.com/v0/b/mobiletracking-cd8f2.appspot.com/o/reject.png?alt=media&token=25da312f-2ec2-492d-97d9-1d47ecd1afd5"})]}),Object(ee.jsx)(_.a,{primary:e.message,secondary:f(e.createdAt.seconds)+" ago"})]}),Object(ee.jsx)(M.a,{})]},++t)}))})}),Object(ee.jsx)(r.b,{to:"/app/profile",children:Object(ee.jsx)(D.a,{onClick:function(e){d(e.currentTarget)},children:Object(ee.jsx)(z.a,{sx:{color:"white"}})})}),Object(ee.jsx)(D.a,{onClick:function(){sessionStorage.removeItem("userData"),Object(B.g)(q).then((function(){return m("/login",{replace:!0})})).catch((function(e){return console.log(e)}))},children:Object(ee.jsx)($.a,{sx:{color:"white"}})})]})}))},ne=a(468),ce=a(444),re=a(177),se=a.n(re),oe=a(178),ie=a.n(oe),le=a(222),ue=a.n(le),de=a(223),je=a.n(de),pe=a(179),be=a.n(pe),he=a(224),me=a.n(he),Oe=a(445),fe=a(110),xe=Object(p.a)((function(e){return{root:{display:"flex"},drawer:{width:60,flexShrink:0,whiteSpace:"nowrap"},appBar:{width:"calc(100% - ".concat(60,"px)"),marginLeft:60},toolbar:Object(w.a)({display:"flex",alignItems:"center",justifyContent:"center",padding:e.spacing(0,1)},e.mixins.toolbar),listContainer:{display:"flex",height:"100%",flexDirection:"column",justifyContent:"center"}}})),ge=function(){var e=xe(),t=y.a.useState(0),a=Object(x.a)(t,2),n=(a[0],a[1]),c=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null,s=["/app/dashboard","/app/manage-hotspots","/app/manage-devices","/app/reports","/app/manage-groups","/app/manage-admins","/app/pricing"],o=["Overview","Hotspots","Devices","Reports","Groups","Admins","Pricing"];return Object(ee.jsxs)("div",{className:e.root,children:[Object(ee.jsx)(ce.a,{}),Object(ee.jsx)(ne.a,{variant:"permanent",children:Object(ee.jsx)("div",{className:e.listContainer,children:Object(ee.jsx)(A.a,{children:null===c?[Object(ee.jsx)(Oe.a,{fontSize:"large",sx:{color:"#6600cc"}}),Object(ee.jsx)(se.a,{fontSize:"large",sx:{color:"red"}}),Object(ee.jsx)(ie.a,{fontSize:"large",sx:{color:"#007bff"}}),Object(ee.jsx)(be.a,{fontSize:"large",sx:{color:"#fc6a03"}}),Object(ee.jsx)(ue.a,{fontSize:"large",sx:{color:"green"}}),Object(ee.jsx)(je.a,{fontSize:"large",sx:{color:"#cc33ff"}}),Object(ee.jsx)(me.a,{fontSize:"large",sx:{color:"#3F00FF"}})].map((function(e,t){return Object(ee.jsx)(r.b,{to:s[t],children:Object(ee.jsxs)(L.a,{sx:{pt:1.5,pb:1.5,px:1,display:"flex",flexDirection:"column",borderBottomColor:"#007bff",borderBottomWidth:10},onClick:function(){return n(t)},children:[Object(ee.jsx)("div",{children:e}),Object(ee.jsx)(fe.a,{color:"black",sx:{fontSize:12},children:o[t]})]})},t)})):[Object(ee.jsx)(Oe.a,{fontSize:"large",sx:{color:"#6600cc"}}),Object(ee.jsx)(se.a,{fontSize:"large",sx:{color:"red"}}),Object(ee.jsx)(ie.a,{fontSize:"large",sx:{color:"#007bff"}}),Object(ee.jsx)(be.a,{fontSize:"large",sx:{color:"orange"}})].map((function(e,t){return Object(ee.jsx)(r.b,{to:s[t],children:Object(ee.jsxs)(L.a,{sx:{pt:1.5,pb:1.5,px:1,display:"flex",flexDirection:"column",borderBottomColor:"#007bff",borderBottomWidth:10},onClick:function(){return n(t)},children:[Object(ee.jsx)("div",{children:e}),Object(ee.jsx)(fe.a,{color:"black",sx:{fontSize:12},children:o[t]})]})},t)}))})})})]})},ve=Object(S.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),ye=Object(S.a)("div")((function(e){var t=e.theme;return Object(g.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},t.breakpoints.up("md"),{paddingLeft:68})})),Se=Object(S.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),we=Object(S.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),Ce=function(){var e=Object(v.useState)(!1),t=Object(x.a)(e,2),a=t[0],n=t[1];return Object(ee.jsxs)(ve,{children:[Object(ee.jsx)(ae,{onMobileNavOpen:function(){return n(!0)}}),Object(ee.jsx)(ge,{onMobileClose:function(){return n(!1)},openMobile:a}),Object(ee.jsx)(ye,{children:Object(ee.jsx)(Se,{children:Object(ee.jsx)(we,{children:Object(ee.jsx)(u.b,{})})})})]})},ke=Object(S.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),Ne=Object(S.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),De=Object(S.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),Ie=Object(S.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),Ae=function(){return Object(ee.jsx)(ke,{children:Object(ee.jsx)(Ne,{children:Object(ee.jsx)(De,{children:Object(ee.jsx)(Ie,{children:Object(ee.jsx)(u.b,{})})})})})},Ee=a(470),Le=a(464),Te=a(487),Pe=a(246),_e=a(241),Me=a(488),Ge=a(448),Fe=a(476),He=a(232),ze=a.n(He),Ue=a(463),We=a(458),Be=a(447),Re=a(103),Je=a(469),Ve=a(40),Ye=a(26),qe=a.n(Ye),Ke=a(228);a.n(Ke).a.config();var Ze="https://murmuring-brook-41081.herokuapp.com/api/v1/main",Xe="pk.eyJ1Ijoic2hpdmFuc2h1OTgxIiwiYSI6ImNrdmoyMjh5bDJmeHgydXAxem1sbHlhOXQifQ.2PZhm_gYI4mjpPyh7xGFSw",Qe="mapbox://styles/shivanshu981/ckvrknxuq05w515pbotlkvj63",$e=a(505),et=a(474),tt=a(506),at=a(507),nt=a(508),ct=a(446),rt=function(e){return Object(ee.jsx)(E.a,{children:Object(ee.jsx)($e.a,{sx:{px:0,mr:4},children:e.locations.map((function(e){return Object(ee.jsxs)(et.a,{children:[Object(ee.jsxs)(tt.a,{children:[Object(ee.jsx)(at.a,{variant:"outlined",color:"error"}),Object(ee.jsx)(nt.a,{})]}),Object(ee.jsx)(ct.a,{children:Object(ee.jsxs)(E.a,{sx:{pb:1.3},children:[Object(ee.jsx)(fe.a,{component:"h6",children:e.address}),Object(ee.jsx)(fe.a,{component:"p",sx:{fontSize:12},children:X()(e.createdAt).format("DD MMMM YYYY - hh:mm a")})]})})]})}))})})},st=y.a.memo(rt),ot=function(e){var t=e.user,a=t.phoneNumber,n=t.createdBy;console.log(t,a,n);var c=Object(v.useState)(0),r=Object(x.a)(c,2),s=r[0],o=r[1],u=Object(v.useState)(0),d=Object(x.a)(u,2),j=d[0],p=d[1],b=Object(v.useState)({width:"100%",height:"100%",latitude:s,longitude:j,zoom:15}),h=Object(x.a)(b,2),m=h[0],O=h[1],f=Object(v.useState)(!1),g=Object(x.a)(f,2),y=g[0],S=g[1],C=Object(v.useState)(null),k=Object(x.a)(C,2),N=k[0],D=k[1],I=Object(v.useState)(null),A=Object(x.a)(I,2),L=A[0],T=A[1],_=Object(v.useState)({}),M=Object(x.a)(_,2),G=M[0],F=M[1],H=Object(v.useState)(""),z=Object(x.a)(H,2),U=z[0],W=z[1],B=Object(v.useState)(!1),J=Object(x.a)(B,2),V=J[0],q=J[1],K=Object(v.useState)(!1),Z=Object(x.a)(K,2),X=Z[0],Q=Z[1],$=Object(v.useState)([]),te=Object(x.a)($,2),ae=te[0],ne=te[1];Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!0),0!==s&&0!==j){e.next=3;break}return e.abrupt("return");case 3:qe.a.get("".concat(Ze,"/getlatlong/").concat(N,"/").concat(L)).then((function(e){console.log("SETTING DATA"),F(e.data),q(!1)})).catch((function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),[N,L]),Object(v.useEffect)((function(){var e=Object(R.d)(Y,"trackerAndroidUser",a),t=Object(R.j)(e,(function(e){if(e.exists()){var t=e.data();O({width:"100%",height:800,latitude:t.liveLocation.latitude,longitude:t.liveLocation.longitude,zoom:15}),o(t.liveLocation.latitude),p(t.liveLocation.longitude),W(t.profilePicture)}}));return function(){return t()}}),[a]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.a.get("".concat(Ze,"/get/location/").concat(n,"/").concat(a,"/").concat((new Date).getMonth()+1));case 3:t=e.sent,c=t.data,ne(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[t]);var ce=function(){X?(Q(!1),O(Object(w.a)(Object(w.a)({},m),{},{width:"100%"}))):(Q(!0),O(Object(w.a)(Object(w.a)({},m),{},{width:"100%"})))};return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Re.a,{children:Object(ee.jsx)("title",{children:"Dashboard"})}),Object(ee.jsxs)(E.a,{sx:{backgroundColor:"background.default",minHeight:"100%",display:"flex"},children:[Object(ee.jsxs)(Je.a,{maxWidth:!0,sx:{px:0,height:"100"},children:["accepted"===t.trackingStatus&&Object(ee.jsxs)(Ve.d,Object(w.a)(Object(w.a)({},m),{},{mapboxApiAccessToken:Xe,mapStyle:Qe,onViewportChange:function(e){return O(e)},children:[Object(ee.jsx)(Ve.b,{latitude:s,longitude:j,children:Object(ee.jsx)("button",{className:"marker-btn",onMouseEnter:function(e){e.preventDefault(),S(!0),D(s),T(j)},onMouseLeave:function(e){e.preventDefault(),S(!1)},onClick:ce,children:Object(ee.jsx)(P.a,{src:U,sx:{backgroundColor:"orange"},children:function(e){var t=e.split(" ");return 1===t.length?t[0].split("")[0].toUpperCase():t[0].split("")[0].toUpperCase()+t[1].split("")[0].toUpperCase()}(t.fullName)})})},"India Gate1"),y?Object(ee.jsx)(Ve.c,{latitude:N,longitude:L,children:Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h2",{style:{textAlign:"center"},children:t.fullName}),V?Object(ee.jsx)("p",{children:"Fetching Location ..."}):Object(ee.jsx)("p",{children:G.formattedAddress})]})}):null]})),"pending"===t.trackingStatus&&Object(ee.jsx)(fe.a,{sx:{margin:10,textAlign:"center"},component:"h1",children:"Tracking request is in pending"}),"rejected"===t.trackingStatus&&Object(ee.jsxs)(E.a,{sx:{position:"relative"},children:[Object(ee.jsx)(E.a,{sx:{position:"absolute",zIndex:1e3,backgroundColor:"#f5f5f5",borderRadius:25,right:"50%",bottom:"30px",transform:"translate(50%)",px:2},children:Object(ee.jsx)(fe.a,{sx:{margin:2,textAlign:"center",color:"red",fontWeight:"bold"},component:"h1",children:"Tracking request is rejected"})}),Object(ee.jsxs)(Ve.d,Object(w.a)(Object(w.a)({},m),{},{mapboxApiAccessToken:Xe,mapStyle:Qe,onViewportChange:function(e){return O(e)},children:[Object(ee.jsx)(Ve.b,{latitude:s,longitude:j,children:Object(ee.jsx)("button",{className:"marker-btn",onMouseEnter:function(e){e.preventDefault(),S(!0),D(s),T(j)},onMouseLeave:function(e){e.preventDefault(),S(!1)},onClick:ce,children:Object(ee.jsx)(P.a,{src:U,sx:{backgroundColor:"orange"}})})},"India Gate1"),y?Object(ee.jsx)(Ve.c,{latitude:N,longitude:L,children:Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h2",{style:{textAlign:"center"},children:t.fullName}),V?Object(ee.jsx)("p",{children:"Fetching Location ..."}):Object(ee.jsx)("p",{children:G.formattedAddress})]})}):null]}))]})]}),X&&Object(ee.jsx)(E.a,{sx:{width:400,display:"flex",justifyContent:"flex-start"},children:0!==ae.length?Object(ee.jsx)(st,{locations:ae}):Object(ee.jsx)(E.a,{sx:{width:300,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(ee.jsx)(fe.a,{component:"h5",variant:"h5",children:"No History Found"})})})]})]})},it=y.a.memo(ot),lt=function(e){var t=e.userList,a=e.senderId,n=e.trackingList,c=Object(v.useState)(!1),r=Object(x.a)(c,2),s=r[0],o=r[1],u=Object(v.useState)(null),d=Object(x.a)(u,2),j=d[0],p=d[1],b=Object(v.useState)(null),h=Object(x.a)(b,2),m=h[0],O=h[1],f=Object(v.useState)(0),g=Object(x.a)(f,2),y=g[0],S=g[1],C=Object(v.useState)(""),k=Object(x.a)(C,2),N=k[0],D=k[1],I=Object(v.useState)({}),A=Object(x.a)(I,2),L=A[0],T=A[1],_=Object(v.useState)(28.598),M=Object(x.a)(_,2),G=M[0],F=M[1],H=Object(v.useState)(77.3),z=Object(x.a)(H,2),U=z[0],W=z[1],B=Object(v.useState)(!1),R=Object(x.a)(B,2),J=R[0],V=R[1],Y=Object(v.useState)(!1),q=Object(x.a)(Y,2),K=q[0],Z=q[1],X=Object(v.useState)([]),Q=Object(x.a)(X,2),$=Q[0],te=Q[1],ae=Object(v.useState)([]),ne=Object(x.a)(ae,2),ce=ne[0],re=ne[1],se=Object(v.useState)({width:"100%",height:"100%",latitude:G,longitude:U,zoom:11}),oe=Object(x.a)(se,2),ie=oe[0],le=oe[1];Object(v.useEffect)((function(){var e=[];n.forEach((function(a){t.forEach((function(t){a.phoneNumber===t.phoneNumber&&(a.location=t.liveLocation,e.push(a))}))})),re(e)}),[n,t]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(!0),qe.a.get("".concat(Ze,"/getlatlong/").concat(j,"/").concat(m)).then((function(e){T(e.data),V(!1)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[j,m]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==N.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,qe.a.get("".concat(Ze,"/get/location/").concat(a,"/").concat(N,"/").concat((new Date).getMonth()+1));case 5:t=e.sent,n=t.data,te(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[2,10]])}))),[N]);var ue=function(e){var t=e.split(" ");return 1===t.length?t[0].split("")[0].toUpperCase():t[0].split("")[0].toUpperCase()+t[1].split("")[0].toUpperCase()};return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Re.a,{children:Object(ee.jsx)("title",{children:"Dashboard"})}),Object(ee.jsxs)(E.a,{sx:{backgroundColor:"background.default",minHeight:"100%",display:"flex"},children:[Object(ee.jsx)(Je.a,{maxWidth:!0,sx:{height:"100"},children:Object(ee.jsxs)(Ve.d,Object(w.a)(Object(w.a)({},ie),{},{mapboxApiAccessToken:Xe,mapStyle:Qe,onViewportChange:function(e){return le(e)},children:[ce.map((function(e,t){return Object(ee.jsx)(Ve.b,{latitude:e.location.latitude,longitude:e.location.longitude,children:Object(ee.jsx)("button",{className:"marker-btn",onMouseEnter:function(a){a.preventDefault(),o(!0),p(e.location.latitude),O(e.location.longitude),F(e.location.latitude),W(e.location.longitude),S(t)},onMouseLeave:function(e){e.preventDefault(),o(!1)},onClick:function(){return function(e){K?(Z(!1),le(Object(w.a)(Object(w.a)({},ie),{},{width:"100%"}))):(Z(!0),le(Object(w.a)(Object(w.a)({},ie),{},{width:"100%"})),D(e.phoneNumber))}(e)},children:Object(ee.jsx)(P.a,{sx:{backgroundColor:"orange"},children:ue(e.fullName)})})},e.phoneNumber)})),s?Object(ee.jsx)(Ve.c,{latitude:j,longitude:m,onClose:function(){o(!1),p(0),O(0)},children:Object(ee.jsxs)("div",{children:[Object(ee.jsx)("h2",{style:{textAlign:"center",marginBottom:"10px"},children:ce[y].fullName}),J?Object(ee.jsx)("p",{children:"Fetching Location ..."}):Object(ee.jsx)("p",{children:L.formattedAddress})]})}):null]}))}),K&&Object(ee.jsx)(E.a,{sx:{width:400,display:"flex",justifyContent:"flex-start"},children:0!==$.length?Object(ee.jsx)(st,{locations:$}):Object(ee.jsx)(E.a,{sx:{width:300,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(ee.jsx)(fe.a,{component:"h5",variant:"h5",children:"No History Found"})})})]})]})},ut=y.a.memo(lt),dt=a(230),jt=a.n(dt),pt="CREATE_HOTSPOT_SUCCESS",bt="CREATE_HOTSPOT_FAIL",ht="GET_HOTSPOT_SUCCESS",mt="GET_HOTSPOT_FAIL",Ot="UPDATE_HOTSPOT_SUCCESS",ft="UPDATE_HOTSPOT_FAIL",xt="DELETE_HOTSPOT_SUCCESS",gt="DELETE_HOTSPOT_FAIL",vt="CREATE_GROUP_SUCCESS",yt="CREATE_GROUP_FAIL",St="GET_GROUP_SUCCESS",wt="GET_GROUP_FAIL",Ct="UPDATE_GROUP_SUCCESS",kt="UPDATE_GROUP_FAIL",Nt="DELETE_GROUP_SUCCESS",Dt="DELETE_GROUP_FAIL",It="CREATE_ADMIN_SUCCESS",At="CREATE_ADMIN_FAIL",Et="GET_ADMIN_SUCCESS",Lt="GET_ADMIN_FAIL",Tt="UPDATE_ADMIN_SUCCESS",Pt="UPDATE_ADMIN_FAIL",_t="DELETE_ADMIN_SUCCESS",Mt="DELETE_ADMIN_FAIL",Gt="CREATE_DEVICE_SUCCESS",Ft="CREATE_DEVICE_FAIL",Ht="GET_DEVICE_SUCCESS",zt="GET_DEVICE_FAIL",Ut="UPDATE_DEVICE_SUCCESS",Wt="UPDATE_DEVICE_FAIL",Bt="DELETE_DEVICE_SUCCESS",Rt="DELETE_DEVICE_FAIL",Jt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},r={body:e},t.next=5,qe.a.post("".concat(Ze,"/create/device"),r,c);case 5:s=t.sent,o=s.data,a({type:Gt,payload:o}),sessionStorage.setItem("deviceList",JSON.stringify(n().devices.deviceList)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Ft,payload:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},Vt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.a.get("".concat(Ze,"/get/devices/").concat(e));case 3:n=t.sent,c=n.data,a({type:Ht,payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:zt,payload:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Yt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.post("".concat(Ze,"/get/devices/admin"),e,n);case 4:c=t.sent,r=c.data,a({type:Ht,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:zt,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},qt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.post("".concat(Ze,"/get/hotspots/admin"),e,n);case 4:c=t.sent,r=c.data,a({type:ht,payload:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:mt,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},Kt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.a.get("".concat(Ze,"/get/hotspots/").concat(e));case 3:n=t.sent,c=n.data,a({type:ht,payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:mt,payload:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Zt=(a(12),function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},r={body:e},t.next=5,qe.a.post("".concat(Ze,"/create/admin"),r,c);case 5:s=t.sent,o=s.data,a({type:It,payload:o}),sessionStorage.setItem("adminList",JSON.stringify(n().admins.adminList)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:At,payload:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()}),Xt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.a.get("".concat(Ze,"/get/admins/").concat(e));case 3:n=t.sent,c=n.data,a({type:Et,payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:Lt,payload:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},Qt=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.put("".concat(Ze,"/update/admin"),e,c);case 4:r=t.sent,s=r.data,console.log(s),a({type:Tt,payload:s}),sessionStorage.setItem("adminList",JSON.stringify(n().admins.adminList)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:Pt,payload:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}()},$t=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.post("".concat(Ze,"/send-email"),e,n);case 4:c=t.sent,r=c.data,console.log(r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Error occured while sending email");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ea=function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a){var n,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.a.get("".concat(Ze,"/get/groups/").concat(e));case 3:n=t.sent,c=n.data,a({type:St,payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),a({type:wt,payload:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},ta=Object(p.a)((function(e){return{root:{height:"100%"},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary}}})),aa=function(){var e=ta(),t=Object(v.useState)(-1),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)([]),o=Object(x.a)(r,2),d=o[0],j=o[1],p=Object(v.useState)(""),b=Object(x.a)(p,2),h=b[0],m=b[1],O=Object(v.useState)([]),f=Object(x.a)(O,2),g=f[0],y=f[1],S=Object(v.useState)(!1),w=Object(x.a)(S,2),C=w[0],k=w[1],N=Object(v.useState)(null),I=Object(x.a)(N,2),M=I[0],G=I[1],F=Object(v.useState)(null),H=Object(x.a)(F,2),z=H[0],U=H[1],W=Object(v.useState)(null),B=Object(x.a)(W,2),J=B[0],V=B[1],q=Object(v.useState)(null),K=Object(x.a)(q,2),Z=K[0],X=K[1],Q=Boolean(Z),$=Object(s.b)(),te=Object(s.c)((function(e){return e.devices})).deviceList,ae=function(){X(null)},ne=Object(u.g)(),ce=function(e,t){"clickaway"!==t&&(k(!1),U(null),G(null))},re=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,se=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null;Object(v.useEffect)((function(){sessionStorage.getItem("authToken")||ne("/login")}),[]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===se&&null!==re&&($(Vt(re.uid)),$(Kt(re.uid)),$(ea(re.uid)),$(Xt(re.uid))),null===se||null===re){e.next=8;break}return e.next=4,qe.a.get("".concat(Ze,"/get/admin/").concat(se.email));case 4:t=e.sent,a=t.data,$(Yt({createdBy:re.uid,adminGroups:a.groups})),$(qt({createdBy:re.uid,adminGroups:a.groups}));case 8:case"end":return e.stop()}}),e)}))),[$]),Object(v.useEffect)((function(){if(0!==te.length){var e=te.map((function(e){return e.phoneNumber})),t=Object(R.c)(Y,"trackerAndroidUser"),a=Object(R.l)(t,Object(R.p)("phoneNumber","in",e)),n=Object(R.j)(a,(function(e){var t=[];e.forEach((function(e){t.push(e.data())})),j(t)}));return function(){return n()}}}),[te]),Object(v.useEffect)((function(){0===h.length&&y([]),c(-1);var e=te.filter((function(e){return e.fullName.toLowerCase().includes(h.toLowerCase())}));y(e)}),[h]),Object(v.useEffect)((function(){if("all"!==J){var e=te.filter((function(e){return e.trackingStatus===J}));y(e)}else y([])}),[J]);var oe=function(e,t){c(t)},ie=function(e){V(e),ae()},le=function(e){var t=e.split(" ");return t[0].split("")[0].toUpperCase()+t[1].split("")[0].toUpperCase()};return Object(ee.jsxs)(E.a,{className:e.root,children:[Object(ee.jsxs)(Ee.a,{container:!0,sx:{height:"inherit"},children:[Object(ee.jsx)(Ee.a,{item:!0,xs:2.4,sx:{height:"100%",overflowY:"scroll"},className:"gridItem",children:Object(ee.jsxs)(Fe.a,{sx:{minHeight:"100%"},className:e.paper,children:[Object(ee.jsxs)(E.a,{sx:{maxWidth:500},children:[Object(ee.jsx)(Le.a,{fullWidth:!0,InputProps:{startAdornment:Object(ee.jsx)(Te.a,{position:"start",children:Object(ee.jsx)(Pe.a,{fontSize:"small",color:"action",children:Object(ee.jsx)(Be.a,{})})}),endAdornment:Object(ee.jsx)(D.a,{onClick:function(e){X(e.currentTarget)},children:Object(ee.jsx)(Pe.a,{fontSize:"small",color:"action",children:Object(ee.jsx)(jt.a,{})})})},placeholder:"Search user",variant:"outlined",onChange:function(e){return m(e.target.value)}}),Object(ee.jsxs)(_e.a,{anchorEl:Z,open:Q,onClose:ae,children:[Object(ee.jsx)(Me.a,{sx:{py:1.2,px:2.5},onClick:function(){ie("all"),c(-1)},children:"All Requests"}),Object(ee.jsx)(Me.a,{sx:{py:1.2,px:2.5},onClick:function(){ie("accepted"),c(-1)},children:"Accepted Requests"}),Object(ee.jsx)(Me.a,{sx:{py:1.2,px:2.5},onClick:function(){ie("rejected"),c(-1)},children:"Rejected Requests"}),Object(ee.jsx)(Me.a,{sx:{py:1.2,px:2.5},onClick:function(){ie("pending"),c(-1)},children:"Pending Requests"})]})]}),Object(ee.jsxs)(A.a,{component:"nav",children:[Object(ee.jsxs)(L.a,{button:!0,sx:{mt:.5,mb:.5,backgroundColor:"#F5F5F5",pt:1.5,pb:1.5},selected:-1===n,onClick:function(){return c(-1)},children:[Object(ee.jsx)(T.a,{children:Object(ee.jsx)(P.a,{sx:{backgroundColor:"orange"},children:Object(ee.jsx)(ze.a,{})})}),Object(ee.jsx)(_.a,{primary:"Overview All Devices"})]},-1),0===g.length&&void 0!==te&&null!==te&&te.map((function(e,t){return Object(ee.jsxs)(L.a,{button:!0,disabled:"pending"===e.trackingStatus,sx:{mt:.5,mb:.5,py:2,backgroundColor:"#F5F5F5",borderLeft:"accepted"===e.trackingStatus?"6px solid green":"rejected"===e.trackingStatus?"6px solid red":"6px solid orange"},selected:n===t,onClick:function(e){return oe(0,t)},children:[Object(ee.jsx)(T.a,{children:Object(ee.jsx)(P.a,{sx:{backgroundColor:"orange"},children:Object(ee.jsx)(fe.a,{fontSize:16,letterSpacing:1,children:le(e.fullName)})})}),Object(ee.jsx)(_.a,{primary:e.fullName})]},t)})),0!==g.length&&g.map((function(e,t){return Object(ee.jsxs)(L.a,{button:!0,disabled:"pending"===e.trackingStatus,sx:{mt:.5,mb:.5,py:2,backgroundColor:"#F5F5F5",borderLeft:"accepted"===e.trackingStatus?"6px solid green":"rejected"===e.trackingStatus?"6px solid red":"6px solid orange"},selected:n===t,onClick:function(e){return oe(0,t)},children:[Object(ee.jsx)(T.a,{children:Object(ee.jsx)(P.a,{sx:{backgroundColor:"orange"},children:Object(ee.jsx)(fe.a,{fontSize:16,letterSpacing:1,children:le(e.fullName)})})}),Object(ee.jsx)(_.a,{primary:e.fullName})]},t)}))]})]})}),Object(ee.jsxs)(Ee.a,{item:!0,xs:9.6,sx:{height:"100%"},children:[Object(ee.jsx)(Ge.a,{direction:"row",justifyContent:"space-between",sx:{padding:2},children:Object(ee.jsx)(fe.a,{variant:"h4",component:"h2",children:"Current Activity"})}),Object(ee.jsxs)(E.a,{sx:{height:"90%",py:1},children:[-1===n&&Object(ee.jsx)(ut,{userList:d,senderId:null===re||void 0===re?void 0:re.uid,trackingList:te}),n>=0&&0===g.length&&Object(ee.jsx)(it,{user:te[n],index:n}),n>=0&&0!==g.length&&Object(ee.jsx)(it,{user:g[n],index:n})]})]})]}),null!==M&&Object(ee.jsx)(Ue.a,{open:C,autoHideDuration:4e3,onClose:ce,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:ce,severity:"success",sx:{width:"100%"},children:M})}),null!==z&&Object(ee.jsx)(Ue.a,{open:C,autoHideDuration:4e3,onClose:ce,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:ce,severity:"error",sx:{width:"100%"},children:z})})]})},na=a(472),ca=a(490),ra=a(459),sa=a(104),oa=a.n(sa),ia=a(489),la=Object(p.a)((function(e){return{image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},login:{margin:e.spacing(3,0,2),padding:e.spacing(1.4),fontSize:15},googleLogin:{margin:e.spacing(2,0,2),fontSize:15}}})),ua=function(){var e=la(),t=Object(u.g)(),a=Object(v.useState)(""),n=Object(x.a)(a,2),c=n[0],s=n[1],o=Object(v.useState)(""),d=Object(x.a)(o,2),j=d[0],p=d[1],b=Object(v.useState)(!1),h=Object(x.a)(b,2),m=h[0],O=h[1],f=localStorage.getItem("credentials")?JSON.parse(localStorage.getItem("credentials")):null;Object(v.useEffect)((function(){null!==f&&(s(f.email),p(f.password),O(f.checked))}),[f]);var g=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(R.c)(Y,"trackerWebUser"),a=Object(R.l)(t,Object(R.p)("email","==",c)),e.next=4,Object(R.g)(a).then(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.size?S():y();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.f)(q,c,j).then(function(){var e=Object(l.a)(i.a.mark((function e(a){var n,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.setItem("authToken",a.user.accessToken),e.prev=1,e.next=4,qe.a.get("".concat(Ze,"/get/admin/").concat(c));case 4:return n=e.sent,r=n.data,s=Object(R.d)(Y,"trackerWebUser",r.createdBy),e.next=9,Object(R.f)(s);case 9:(o=e.sent).exists()&&sessionStorage.setItem("userData",JSON.stringify(o.data())),sessionStorage.setItem("adminData",JSON.stringify(r)),r.passwordChanged?t("/app/dashboard",{replace:!0}):t("/admin/change-password",{replace:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.code,a=e.message;alert(t,a)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.f)(q,c,j).then(function(){var e=Object(l.a)(i.a.mark((function e(a){var n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.user,console.log(n),sessionStorage.setItem("authToken",n.accessToken),c=Object(R.d)(Y,"trackerWebUser",n.uid),e.next=6,Object(R.f)(c);case 6:(r=e.sent).exists()?(sessionStorage.setItem("userData",JSON.stringify(r.data())),t("/app/dashboard",{replace:!0})):console.log("No such document!");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.code,a=e.message;alert(t,a)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(Ee.a,{sx:{height:"100%"},container:!0,component:"main",className:e.root,children:[Object(ee.jsx)(ce.a,{}),Object(ee.jsx)(Ee.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,sm:8,md:5,component:Fe.a,elevation:6,square:!0,children:Object(ee.jsxs)("div",{className:e.paper,children:[Object(ee.jsx)(P.a,{className:e.avatar,children:Object(ee.jsx)(oa.a,{})}),Object(ee.jsx)(fe.a,{component:"h1",variant:"h1",sx:{mt:1,mb:4},children:"GPS REPORT"}),Object(ee.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:function(e){return s(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:j,onChange:function(e){return p(e.target.value)}}),Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"flex-end"},children:Object(ee.jsx)(ia.a,{variant:"body2",children:"Forgot password?"})}),Object(ee.jsx)(ca.a,{control:Object(ee.jsx)(ra.a,{value:m,color:"primary",onChange:function(e){return O(e.target.checked)}}),label:"Remember me"}),Object(ee.jsx)(na.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.login,onClick:function(){return g()},children:"LOGIN"}),Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",mt:1.3},children:Object(ee.jsx)(ia.a,{component:r.b,to:"/register",variant:"body2",underline:"hover",children:"Don't have an account? Sign up for free"})})]})]})})]})},da=function(){return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Re.a,{children:Object(ee.jsx)("title",{children:"404 | Material Kit"})}),Object(ee.jsx)(E.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(ee.jsxs)(Je.a,{maxWidth:"md",children:[Object(ee.jsx)(fe.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: The page you are looking for isn\u2019t here"}),Object(ee.jsx)(fe.a,{align:"center",color:"textPrimary",variant:"subtitle2",children:"You either tried some shady route or you came here by mistake. Whichever it is, try using the navigation"}),Object(ee.jsx)(E.a,{sx:{textAlign:"center"},children:Object(ee.jsx)("img",{alt:"Under development",src:"/static/images/undraw_page_not_found_su7k.svg",style:{marginTop:50,display:"inline-block",maxWidth:"100%",width:560}})})]})})]})},ja=Object(p.a)((function(e){return{image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(4,2),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},login:{margin:e.spacing(3,0,2),padding:e.spacing(1.4),fontSize:15},googleLogin:{margin:e.spacing(2,0,2),fontSize:15}}})),pa=function(){var e=ja(),t=Object(u.g)(),a=Object(v.useState)(""),n=Object(x.a)(a,2),c=n[0],s=n[1],o=Object(v.useState)(""),d=Object(x.a)(o,2),j=d[0],p=d[1],b=Object(v.useState)(""),h=Object(x.a)(b,2),m=h[0],O=h[1],f=Object(v.useState)(""),g=Object(x.a)(f,2),y=g[0],S=g[1],w=Object(v.useState)(""),C=Object(x.a)(w,2),k=C[0],N=C[1],D=Object(v.useState)(!1),I=Object(x.a)(D,2),A=I[0],L=I[1],T=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.b)(q,c,j).then(function(){var e=Object(l.a)(i.a.mark((function e(a){var n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.user,Object(B.i)(q.currentUser,{displayName:m+y}).catch((function(e){return console.log(e.message)})),c={uid:n.uid,firstName:m,lastName:y,email:n.email,profilePhoto:"https://th.bing.com/th/id/OIP.9B2RxsHDB_s7FZT0mljnhQHaHa?pid=ImgDet&rs=1",companyName:k,createdAt:Object(R.m)()},sessionStorage.setItem("authToken",n.accessToken),r=Object(R.d)(Y,"trackerWebUser",n.uid),e.next=7,Object(R.n)(r,c).then((function(){sessionStorage.setItem("userData",JSON.stringify(c)),t("/app/dashboard",{replace:!0})})).catch((function(e){var t=e.code,a=e.message;alert(t,a)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){var t=e.code,a=e.message;alert(t,a)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(Ee.a,{sx:{height:"100%"},container:!0,component:"main",children:[Object(ee.jsx)(ce.a,{}),Object(ee.jsx)(Ee.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,sm:8,md:5,component:Fe.a,elevation:6,square:!0,sx:{p:2},children:Object(ee.jsxs)("div",{className:e.paper,children:[Object(ee.jsx)(P.a,{className:e.avatar,children:Object(ee.jsx)(oa.a,{})}),Object(ee.jsx)(fe.a,{component:"h1",variant:"h1",sx:{mt:1,mb:4},children:"GPS REPORT"}),Object(ee.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"name",autoFocus:!0,value:m,onChange:function(e){return O(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"name",value:y,onChange:function(e){return S(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:c,onChange:function(e){return s(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Company Name",name:"companyName",autoComplete:"text",value:k,onChange:function(e){return N(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:j,onChange:function(e){return p(e.target.value)}}),Object(ee.jsx)(ca.a,{control:Object(ee.jsx)(ra.a,{value:"remember",color:"primary",checked:A,onChange:function(e){return L(e.target.checked)}}),label:"I have read the Terms and Conditions"}),Object(ee.jsx)(na.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.login,onClick:function(){return T()},children:"Sign-Up"}),Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",mt:1.3},children:Object(ee.jsx)(ia.a,{component:r.b,to:"/login",variant:"body2",underline:"hover",children:"Already have an account? Login here"})})]})]})})]})},ba=a(19),ha=a(497),ma=a(15),Oa=a(493),fa=a(494),xa=a(496),ga=a(492),va=a(498),ya=a(495),Sa=a(491),wa=a(171),Ca=a.n(wa),ka=a(170),Na=a.n(ka);function Da(e){var t=e.row,a=e.hotspotList,n=e.selectedHotspots,c=e.selectedGroups,r=e.selectedMonth,s=v.useState(!1),o=Object(x.a)(s,2),u=o[0],d=o[1],j=v.useState([]),p=Object(x.a)(j,2),b=p[0],h=p[1],m=v.useState(!1),O=Object(x.a)(m,2),f=O[0],g=O[1],y=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,S=t.hotspots.map((function(e){return e.hotspot})),w=function(e){return S.findIndex((function(t){return t===e._id}))},C=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a,n=[],r=Object(ma.a)(c);try{for(r.s();!(a=r.n()).done;){var s=a.value;console.log("inside");var o,i=Object(ma.a)(t);try{for(i.s();!(o=i.n()).done;){var l=o.value;s===l.group._id&&n.push(l)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}console.log("Here"),e(n)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v.useEffect(Object(l.a)(i.a.mark((function e(){var a,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,qe.a.get("".concat(Ze,"/get/location/").concat(y.uid,"/").concat(t.phoneNumber,"/").concat(r+1));case 4:if(a=e.sent,n=a.data,0!==c.length){e.next=11;break}h(n),g(!1),e.next=16;break;case 11:return e.next=13,C(n);case 13:s=e.sent,h(s),g(!1);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[c]),Object(ee.jsxs)(v.Fragment,{children:[Object(ee.jsxs)(Sa.a,{sx:{"& > *":{borderBottom:"unset"}},children:[Object(ee.jsx)(ga.a,{children:Object(ee.jsx)(D.a,{"aria-label":"expand row",size:"small",onClick:function(){return d(!u)},children:u?Object(ee.jsx)(Na.a,{}):Object(ee.jsx)(Ca.a,{})})}),Object(ee.jsx)(ga.a,{component:"th",scope:"row",children:t.device}),Object(ee.jsx)(ga.a,{align:"center",children:t.phoneNumber}),0===n.length&&a.map((function(e,a){return Object(ee.jsx)(v.Fragment,{children:-1!==w(e)?Object(ee.jsx)(ga.a,{align:"center",children:t.hotspots[w(e)].total},e.hotspot):Object(ee.jsx)(ga.a,{align:"center",children:"0"},e.hotspot)},e.hotspot)})),0!==n.length&&n.map((function(e,a){return Object(ee.jsx)(v.Fragment,{children:-1!==w(e)?Object(ee.jsx)(ga.a,{align:"center",children:t.hotspots[w(e)].total},e.hotspot):Object(ee.jsx)(ga.a,{align:"center",children:"0"},e.hotspot)},e.hotspot)}))]}),Object(ee.jsx)(Sa.a,{children:Object(ee.jsx)(ga.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(ee.jsx)(Oa.a,{in:u,timeout:"auto",unmountOnExit:!0,children:Object(ee.jsxs)(E.a,{sx:{margin:1},children:[Object(ee.jsx)(fe.a,{variant:"h6",sx:{my:2},component:"div",children:"History"}),Object(ee.jsxs)(fa.a,{size:"small","aria-label":"purchases",children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{children:"Date"}),Object(ee.jsx)(ga.a,{children:"Address"}),Object(ee.jsx)(ga.a,{align:"right",children:"Hotspot"}),Object(ee.jsx)(ga.a,{align:"right",children:"Group"})]})}),Object(ee.jsx)(xa.a,{children:!f&&b.map((function(e,t){return Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},component:"th",scope:"row",children:X()(e.createdAt).format("DD MMMM YYYY - hh:mm a")}),Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},children:e.address}),Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},align:"right",children:e.hotspot.hotspotName}),Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},align:"right",children:e.group.groupName})]},t+1)}))})]}),f&&Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",width:"100%",my:3},children:Object(ee.jsx)(ha.a,{sx:{fontSize:30}})})]})})})})]})}var Ia=function(e){return Object(ee.jsx)(va.a,{component:Fe.a,children:Object(ee.jsxs)(fa.a,{children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{}),Object(ee.jsx)(ga.a,{children:"Full Name"}),Object(ee.jsx)(ga.a,{align:"center",children:"Phone Number"}),0===e.selectedHotspots.length&&e.hotspotList.map((function(e,t){return Object(ee.jsx)(ga.a,{align:"center",children:e.hotspotName},e._id)})),0!==e.selectedHotspots.length&&e.selectedHotspots.map((function(e,t){return Object(ee.jsx)(ga.a,{align:"center",children:e.hotspotName},e._id)}))]})}),Object(ee.jsx)(xa.a,{children:e.tableData.map((function(t){return Object(ee.jsx)(Da,{row:t,hotspotList:e.hotspotList,selectedHotspots:e.selectedHotspots,selectedGroups:e.selectedGroups,selectedMonth:e.selectedMonth},t.phoneNumber)}))})]})})},Aa=v.memo(Ia),Ea=a(486),La=a(465),Ta=a(461),Pa=a(471),_a={PaperProps:{style:{maxHeight:224}}},Ma=function(e){return Object(ee.jsxs)(Ea.a,{variant:"outlined",sx:{width:"250px",ml:3},children:[Object(ee.jsx)(La.a,{id:"hotspotFilter",children:"Hotspots"}),Object(ee.jsx)(Ta.a,{id:"hotspotFilter",multiple:!0,value:e.selectedHotspotNames,onChange:e.handleHotspotSelect,input:Object(ee.jsx)(Pa.a,{label:"Hotspots"}),renderValue:function(e){return e.join(", ")},MenuProps:_a,children:e.hotspotNames.map((function(t){return Object(ee.jsxs)(Me.a,{value:t._id,children:[Object(ee.jsx)(ra.a,{checked:e.selectedHotspotNames.indexOf(t._id)>-1}),Object(ee.jsx)(_.a,{primary:t.hotspotName})]},t._id)}))})]})},Ga=y.a.memo(Ma),Fa={PaperProps:{style:{maxHeight:224}}},Ha=function(e){return Object(ee.jsxs)(Ea.a,{variant:"outlined",sx:{width:"250px",ml:3},children:[Object(ee.jsx)(La.a,{children:"Mobile Devices"}),Object(ee.jsx)(Ta.a,{label:"Mobile Devices",multiple:!0,value:e.selectedDevices,onChange:e.handleSelectedDevice,input:Object(ee.jsx)(Pa.a,{label:"Mobile Devices"}),renderValue:function(e){return e.join(", ")},MenuProps:Fa,children:e.mobileDevices.map((function(t,a){return Object(ee.jsxs)(Me.a,{value:"".concat(t.fullName," - ").concat(t.phoneNumber),children:[Object(ee.jsx)(ra.a,{checked:e.selectedDevices.indexOf("".concat(t.fullName," - ").concat(t.phoneNumber))>-1}),Object(ee.jsx)(_.a,{primary:"".concat(t.fullName," +91 ").concat(t.phoneNumber)})]},t._id)}))})]})},za=y.a.memo(Ha),Ua=function(e){var t=y.a.useState(!1),a=Object(x.a)(t,2),n=a[0],c=a[1],r=y.a.useState(!1),s=Object(x.a)(r,2),o=s[0],i=s[1];y.a.useEffect((function(){null!==e.subscription&&c(1===e.subscription.reportCount)}),[e.subscription]);return console.log(n),Object(ee.jsxs)(y.a.Fragment,{children:[Object(ee.jsxs)(Ea.a,{variant:"outlined",sx:{width:"250px",ml:3},children:[Object(ee.jsx)(La.a,{children:"Month"}),Object(ee.jsx)(Ta.a,{value:e.selectedMonth,onChange:n?function(){i(!0)}:function(t){return e.setSelectedMonth(t.target.value)},label:"Month",children:e.Months.map((function(e,t){return Object(ee.jsx)(Me.a,{sx:{py:1.2,px:2},value:e,children:e},t)}))})]}),Object(ee.jsx)(Ue.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:o,autoHideDuration:6e3,onClose:function(){return i(!1)},children:Object(ee.jsx)(We.a,{onClose:function(){return i(!1)},severity:"error",variant:"filled",sx:{width:"100%"},children:"You cannot use this feature. Please upgrade your plan."})})]})},Wa=y.a.memo(Ua),Ba={PaperProps:{style:{maxHeight:224}}},Ra=function(e){return Object(ee.jsxs)(Ea.a,{variant:"outlined",sx:{width:"250px",ml:3},children:[Object(ee.jsx)(La.a,{id:"hotspotFilter",children:"Groups"}),Object(ee.jsx)(Ta.a,{id:"hotspotFilter",multiple:!0,value:e.selectedGroupNames,onChange:e.handleGroupSelect,input:Object(ee.jsx)(Pa.a,{label:"Groups"}),renderValue:function(e){return e.join(", ")},MenuProps:Ba,children:e.groupNames.map((function(t,a){return Object(ee.jsxs)(Me.a,{value:t._id,children:[Object(ee.jsx)(ra.a,{checked:e.selectedGroupNames.indexOf(t._id)>-1}),Object(ee.jsx)(_.a,{primary:t.groupName})]},t._id)}))})]})},Ja=y.a.memo(Ra),Va=a(233),Ya=a.n(Va),qa={customerId:null,subscriptions:[],cart:{}},Ka=function(e,t){if("SUBSCRIPTION_DATA_CHANGED"===t.type){var a=t.payload,n=a.customerId,c=a.subscriptions;return Object(w.a)(Object(w.a)({},e),{},{customerId:n,subscriptions:c,isInitialized:!0})}if("SELECT_PRODUCT"===t.type){console.log("Success",t.payload);var r=t.payload.cart;return Object(w.a)(Object(w.a)({},e),{},{cart:r})}if("PAYMENT_DETAILS"===t.type){console.log("Success",t.payload);var s=t.payload.details;return Object(w.a)(Object(w.a)({},e),{},{cart:Object(w.a)(Object(w.a)({},e.cart),{},{details:s})})}return e},Za=Object(v.createContext)(Object(w.a)({},qa)),Xa=function(e){var t=e.children,a=Object(v.useReducer)(Ka,qa),n=Object(x.a)(a,2),c=n[0],r=n[1];Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(B.d)(q,function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,c,l,u,d,j,p,b,h,m,O,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=Object(R.d)(Y,"trackerWebUser",t.uid),e.next=4,Object(R.f)(a);case 4:if(!(n=e.sent).exists()){e.next=10;break}l=n.data(),c={uid:l.uid,displayName:"".concat(l.firstName," ").concat(l.lastName),email:l.email},e.next=22;break;case 10:return u=t.email,console.log(u),e.next=14,qe.a.get("".concat(Ze,"/get/admin/").concat(u));case 14:return d=e.sent,j=d.data,p=j.createdBy,b=Object(R.d)(Y,"trackerWebUser",p),e.next=20,Object(R.f)(b);case 20:(h=e.sent).exists()&&(m=h.data(),c={uid:m.uid,displayName:"".concat(m.firstName," ").concat(m.lastName),email:m.email});case 22:if(!c){e.next=33;break}return e.next=25,s(c);case 25:if(!(O=e.sent)){e.next=31;break}return e.next=29,o(null===O||void 0===O?void 0:O.id);case 29:f=e.sent,r({type:"SUBSCRIPTION_DATA_CHANGED",payload:{customerId:null===O||void 0===O?void 0:O.id,subscriptions:f}});case 31:e.next=34;break;case 33:r({type:"SUBSCRIPTION_DATA_CHANGED",payload:{customerId:null,subscriptions:[]}});case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),console.log(e.t0.message),r({type:"SUBSCRIPTION_DATA_CHANGED",payload:{customerId:null,subscriptions:[]}});case 40:case"end":return e.stop()}}),e,null,[[0,36]])})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),[r]);var s=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,c,r,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.uid,n=t.displayName,c=t.email,r={headers:{"Content-type":"application/json"}},s={userId:a,name:n,email:c},e.next=5,qe.a.post("".concat(Ze,"/create/customer"),s,r);case 5:return o=e.sent,l=o.data,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,qe.a.get("".concat(Ze,"/subscriptions/").concat(t));case 3:return a=e.sent,n=a.data,e.abrupt("return",n.result);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ee.jsx)(Za.Provider,{value:{state:c,dispatch:r},children:t})},Qa=Za.Consumer,$a=function(){return Object(v.useContext)(Za)},en=function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.get("".concat(Ze,"/subscription/config"));case 2:return t=e.sent,a=t.data,e.abrupt("return",a.prices);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tn=function(){var e=Object(l.a)(i.a.mark((function e(t){var a,n,c,r,s,o,l,u,d,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.subscriptions.length){e.next=19;break}c=Object(ma.a)(null===t||void 0===t||null===(n=t.subscriptions)||void 0===n?void 0:n.data),e.prev=2,c.s();case 4:if((r=c.n()).done){e.next=11;break}if("active"!==(s=r.value).status){e.next=9;break}return a=s,e.abrupt("break",11);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),c.e(e.t0);case 16:return e.prev=16,c.f(),e.finish(16);case 19:if(!a){e.next=29;break}return e.next=22,en();case 22:if(o=e.sent,0===(l=0!==o.length?o.filter((function(e){return e.id===a.plan.id})):[]).length){e.next=29;break}return u=l[0],d=u.product.name,j={planId:u.id,productName:d,productId:u.product.id,hotspotCount:"Pro Plan"===d?Number.MAX_VALUE:10,deviceCount:"Pro Plan"===d?a.quantity:Number.MAX_VALUE,groupCount:"Pro Plan"===d?Number.MAX_VALUE:2,adminCount:"Pro Plan"===d?Number.MAX_VALUE:0,reportCount:"Pro Plan"===d?Number.MAX_VALUE:1},e.abrupt("return",j);case 29:return e.abrupt("return",null);case 30:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();function an(e){var t=e.row,a=e.hotspotList,n=e.selectedHotspots,c=e.selectedGroups,r=e.selectedMonth,s=v.useState([]),o=Object(x.a)(s,2),u=o[0],d=o[1],j=v.useState(!1),p=Object(x.a)(j,2),b=p[0],h=p[1],m=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,O=t.hotspots.map((function(e){return e.hotspot})),f=function(e){return O.findIndex((function(t){return t===e._id}))},g=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var a,n=[],r=Object(ma.a)(c);try{for(r.s();!(a=r.n()).done;){var s=a.value;console.log("inside");var o,i=Object(ma.a)(t);try{for(i.s();!(o=i.n()).done;){var l=o.value;s===l.group._id&&n.push(l)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){r.e(u)}finally{r.f()}console.log("Here"),e(n)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return v.useEffect(Object(l.a)(i.a.mark((function e(){var a,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(!0),e.next=4,qe.a.get("".concat(Ze,"/get/location/").concat(m.uid,"/").concat(t.phoneNumber,"/").concat(r+1));case 4:if(a=e.sent,n=a.data,0!==c.length){e.next=11;break}d(n),h(!1),e.next=16;break;case 11:return e.next=13,g(n);case 13:s=e.sent,d(s),h(!1);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[0,18]])}))),[c]),Object(ee.jsxs)(v.Fragment,{children:[Object(ee.jsxs)(Sa.a,{sx:{"& > *":{borderBottom:"unset"}},children:[Object(ee.jsx)(ga.a,{}),Object(ee.jsx)(ga.a,{component:"th",scope:"row",children:t.device}),Object(ee.jsx)(ga.a,{align:"center",children:t.phoneNumber}),0===n.length&&a.map((function(e,a){return Object(ee.jsx)(v.Fragment,{children:-1!==f(e)?Object(ee.jsx)(ga.a,{align:"center",children:t.hotspots[f(e)].total},e.hotspot):Object(ee.jsx)(ga.a,{align:"center",children:"0"},e.hotspot)},e.hotspot)})),0!==n.length&&n.map((function(e,a){return Object(ee.jsx)(v.Fragment,{children:-1!==f(e)?Object(ee.jsx)(ga.a,{align:"center",children:t.hotspots[f(e)].total},e.hotspot):Object(ee.jsx)(ga.a,{align:"center",children:"0"},e.hotspot)},e.hotspot)}))]}),Object(ee.jsx)(Sa.a,{children:Object(ee.jsx)(ga.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6,children:Object(ee.jsxs)(E.a,{sx:{margin:1},children:[Object(ee.jsx)(fe.a,{variant:"h6",sx:{my:2},component:"div",children:"History"}),Object(ee.jsxs)(fa.a,{size:"small","aria-label":"purchases",children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{children:"Date"}),Object(ee.jsx)(ga.a,{children:"Address"}),Object(ee.jsx)(ga.a,{align:"right",children:"Hotspot"}),Object(ee.jsx)(ga.a,{align:"right",children:"Group"})]})}),Object(ee.jsx)(xa.a,{children:!b&&u.map((function(e,t){return Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},component:"th",scope:"row",children:X()(e.createdAt).format("DD MMMM YYYY - hh:mm a")}),Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},children:e.address}),Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},align:"right",children:e.hotspot.hotspotName}),Object(ee.jsx)(ga.a,{sx:{borderWidth:0,padding:"16px"},align:"right",children:e.group.groupName})]},t+1)}))})]}),b&&Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",width:"100%",my:3},children:Object(ee.jsx)(ha.a,{sx:{fontSize:30}})})]})})})]})}var nn=function(e){return Object(ee.jsx)(va.a,{hidden:!0,component:Fe.a,children:Object(ee.jsxs)(fa.a,{id:e.id,children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{}),Object(ee.jsx)(ga.a,{children:"Full Name"}),Object(ee.jsx)(ga.a,{align:"center",children:"Phone Number"}),0===e.selectedHotspots.length&&e.hotspotList.map((function(e,t){return Object(ee.jsx)(ga.a,{align:"center",children:e.hotspotName},e._id)})),0!==e.selectedHotspots.length&&e.selectedHotspots.map((function(e,t){return Object(ee.jsx)(ga.a,{align:"center",children:e.hotspotName},e._id)}))]})}),Object(ee.jsx)(xa.a,{children:e.tableData.map((function(t){return Object(ee.jsx)(an,{row:t,hotspotList:e.hotspotList,selectedHotspots:e.selectedHotspots,selectedGroups:e.selectedGroups,selectedMonth:e.selectedMonth},t.phoneNumber)}))})]})})},cn=v.memo(nn),rn=["January","February","March","April","May","June","July","August","September","October","November","December"],sn=function(){var e=Object(v.useState)([]),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(v.useState)([]),r=Object(x.a)(c,2),o=r[0],d=r[1],j=Object(v.useState)([]),p=Object(x.a)(j,2),b=p[0],h=p[1],m=Object(v.useState)([]),O=Object(x.a)(m,2),f=O[0],g=O[1],y=Object(v.useState)([]),S=Object(x.a)(y,2),w=S[0],C=S[1],k=Object(v.useState)(rn[(new Date).getMonth()]),N=Object(x.a)(k,2),D=N[0],I=N[1],A=Object(v.useState)(!1),L=Object(x.a)(A,2),T=L[0],P=L[1],_=Object(v.useState)([]),M=Object(x.a)(_,2),G=M[0],F=M[1],H=Object(v.useState)(null),z=Object(x.a)(H,2),U=z[0],W=z[1],B=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,R=Object(s.c)((function(e){return e.devices})).deviceList,J=Object(s.c)((function(e){return e.groups})).groupList,V=Object(s.c)((function(e){return e.hotspots})).hotspotList,Y=$a().state,q=Object(u.g)();Object(v.useEffect)((function(){sessionStorage.getItem("authToken")||q("/login")}),[]),Object(v.useEffect)((function(){null!==B&&(P(!0),function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.get("".concat(Ze,"/get/attendance/").concat(B.uid,"/").concat(rn.indexOf(D)+1));case 2:t=e.sent,a=t.data,console.log(a),n(a),P(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[D]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(Y);case 2:t=e.sent,W(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var K=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,d("string"===typeof a?a.split(","):a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,h("string"===typeof a?a.split(","):a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(!0),t=[],0!==o.length?o.forEach((function(e){var a,n=V.filter((function(t){return t._id===e}));(a=t).push.apply(a,Object(ba.a)(n))})):t=V,g(t),n=[],0!==w.length?(c=a,w.forEach((function(e,t){var a,r=e.split(" - ")[1],s=c.filter((function(e){return e.phoneNumber===r}));(a=n).push.apply(a,Object(ba.a)(s))}))):n=a,F(n),P(!1);case 8:case"end":return e.stop()}}),e)}))),[w,o]),Object(ee.jsxs)(E.a,{sx:{p:5},children:[Object(ee.jsxs)(E.a,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:4},children:[Object(ee.jsx)(Wa,{Months:rn,selectedMonth:D,setSelectedMonth:I,subscription:U}),Object(ee.jsx)(Ga,{handleHotspotSelect:K,selectedHotspotNames:o,hotspotNames:V}),Object(ee.jsx)(Ja,{handleGroupSelect:Z,selectedGroupNames:b,groupNames:J}),Object(ee.jsx)(za,{handleSelectedDevice:function(e){var t=e.target.value;C("string"===typeof t?t.split(","):t)},selectedDevices:w,mobileDevices:R}),Object(ee.jsx)(na.a,{variant:"outlined",sx:{p:0},children:Object(ee.jsx)(Ya.a,{id:"test-table-xls-button",table:"table-to-xls",filename:"report",sheet:"tablexls",className:"export-btn",buttonText:"Export"})})]}),Object(ee.jsx)(E.a,{sx:{my:4},children:T?Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",mt:"300px"},children:Object(ee.jsx)(ha.a,{color:"inherit"})}):Object(ee.jsx)(Aa,{tableData:0===w.length?a:G,id:"table-to-xls",hotspotList:V,selectedHotspots:f,selectedGroups:b,selectedMonth:rn.indexOf(D)})}),Object(ee.jsx)(E.a,{sx:{my:4},children:T?Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",mt:"300px"},children:Object(ee.jsx)(ha.a,{color:"inherit"})}):Object(ee.jsx)(cn,{tableData:0===w.length?a:G,id:"table-to-xls",hotspotList:V,selectedHotspots:f,selectedGroups:b,selectedMonth:rn.indexOf(D)})})]})},on=a(449),ln=function(){var e=Object(v.useState)("All"),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(v.useState)([]),r=Object(x.a)(c,2),s=r[0],o=(r[1],Object(v.useState)([])),i=Object(x.a)(o,2),l=i[0],u=i[1],d=(sessionStorage.getItem("userData")&&JSON.parse(sessionStorage.getItem("userData")),function(e){var t=X()(new Date(1e3*e)).fromNow();switch(t){case"in a few seconds":case"a few seconds ago":return"few sec";case"a minute ago":return"1m";case"an hour ago":return"1h";case"a day ago":return"1day";default:var a=t.split(" ")[0],n=t.split(" ")[1];return"minutes"!==n&&"minute"!==n||(n="m"),"hours"!==n&&"hour"!==n||(n="h"),"days"!==n&&"day"!==n||(n="d"),a+n}});return Object(v.useEffect)((function(){var e=s,t=(new Date).getTime(),n=[];if("Today"===a)n=e.filter((function(e){return new Date(1e3*e.createdAt.seconds).getDate()===new Date(t).getDate()}));else if("Last Week"===a){var c=new Date(t).getDate()-7;c<=0&&(c=30+c);var r=new Date(t).getDate();console.log(c,r),n=e.filter((function(e){return new Date(1e3*e.createdAt.seconds).getDate()>=c||new Date(1e3*e.createdAt.seconds).getDate()<=r}))}else n=e;u(n)}),[a]),Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",m:4},children:Object(ee.jsxs)(Fe.a,{sx:{width:{md:"70%",lg:"60%",xl:"50%"},p:2,borderRadius:5,boxShadow:5},children:[Object(ee.jsx)(Ge.a,{direction:"row",justifyContent:"space-between",sx:{p:2},children:Object(ee.jsxs)(E.a,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[Object(ee.jsx)(E.a,{children:Object(ee.jsx)(fe.a,{variant:"h3",children:"Notifications"})}),Object(ee.jsxs)(Ge.a,{direction:"row",alignItems:"center",children:[Object(ee.jsx)(fe.a,{variant:"h4",children:"Filter By"}),Object(ee.jsxs)(Ea.a,{variant:"outlined",sx:{width:250,ml:3},children:[Object(ee.jsx)(La.a,{children:"Select Filter"}),Object(ee.jsxs)(Ta.a,{value:a,onChange:function(e){n(e.target.value)},label:"Select Filter",children:[Object(ee.jsx)(Me.a,{value:"All",children:"All"}),Object(ee.jsx)(Me.a,{value:"Today",children:"Today"}),Object(ee.jsx)(Me.a,{value:"Last Week",children:"Last Week"})]})]})]})]})}),Object(ee.jsxs)(A.a,{sx:{padding:2},children:["All"===a&&s.map((function(e,t){return Object(ee.jsxs)("div",{children:[Object(ee.jsxs)(L.a,{sx:{mt:1.5},children:[Object(ee.jsx)(T.a,{children:Object(ee.jsx)(P.a,{children:Object(ee.jsx)(on.a,{})})}),Object(ee.jsx)(_.a,{primary:e.message,secondary:d(e.createdAt.seconds)+" ago"})]}),Object(ee.jsx)(M.a,{})]},++t)})),"All"!==a&&l.map((function(e,t){return Object(ee.jsxs)("div",{children:[Object(ee.jsxs)(L.a,{sx:{mt:1.5},children:[Object(ee.jsx)(T.a,{children:Object(ee.jsx)(P.a,{children:Object(ee.jsx)(on.a,{})})}),Object(ee.jsx)(_.a,{primary:e.message,secondary:d(e.createdAt.seconds)+" ago"})]}),Object(ee.jsx)(M.a,{})]},++t)}))]})]})})},un=a(499),dn=a(450),jn=a(500),pn=a(501),bn={PaperProps:{style:{maxHeight:224,width:250}}},hn=function(e){var t=e.setEditDialogOpen,a=e.editDialogOpen,n=e.selectedDevice,c=e.trackingGroups,r=(e.setSuccess,e.setSnackOpen),o=e.setError,u=Object(v.useState)(""),d=Object(x.a)(u,2),j=d[0],p=d[1],b=Object(v.useState)([]),h=Object(x.a)(b,2),m=h[0],O=h[1],f=Object(s.b)();Object(v.useEffect)((function(){if(0!==Object.entries(n).length){p(n.fullName);var e=n.groups,t=[];e.forEach((function(e){return t.push(e._id)})),O(t)}}),[n]);var g=function(){if(0===j.length)return o("Full name is required"),void r(!0);var e={_id:n._id,fullName:j,groups:m};f(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.put("".concat(Ze,"/update/device"),e,c);case 4:r=t.sent,s=r.data,a({type:Ut,payload:s}),sessionStorage.setItem("deviceList",JSON.stringify(n().devices.deviceList)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:Wt,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(e)),p(""),O([]),t(!1)};return Object(ee.jsxs)(un.a,{open:a,onClose:function(){return t(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:22},children:"Edit Device"}),Object(ee.jsxs)(jn.a,{sx:{width:500},children:[Object(ee.jsx)(Le.a,{autoFocus:!0,margin:"dense",id:"name",label:"Full Name",type:"text",fullWidth:!0,variant:"outlined",value:j,onChange:function(e){return p(e.target.value)}}),Object(ee.jsxs)(Ea.a,{margin:"normal",fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"device-group",children:"Select Group"}),Object(ee.jsx)(Ta.a,{labelId:"device-group",label:"Select Group",value:m,onChange:function(e){var t=e.target.value;O("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:function(e){return e.join(", ")},MenuProps:bn,children:c.map((function(e){return Object(ee.jsxs)(Me.a,{value:e._id,children:[Object(ee.jsx)(ra.a,{checked:m.indexOf(e._id)>-1}),Object(ee.jsx)(_.a,{primary:e.groupName})]},e._id)}))})]})]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return t(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return g()},children:"Save Changes"})]})]})},mn=a(473),On=a(106),fn=a.n(On),xn=a(105),gn=a.n(xn),vn=a(172),yn=a.n(vn),Sn=function(e){e.success,e.error,e.open;var t=e.toggleEditDeviceDialog,a=Object(v.useState)([]),n=Object(x.a)(a,2),c=(n[0],n[1],sessionStorage.getItem("userData")&&JSON.parse(sessionStorage.getItem("userData")),sessionStorage.getItem("adminData")&&JSON.parse(sessionStorage.getItem("adminData")),Object(s.c)((function(e){return e.devices})).deviceList),r=Object(s.b)(),o=function(e){var t;r((t=e._id,function(){var e=Object(l.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.a.delete("".concat(Ze,"/delete/device/").concat(t));case 3:a({type:Bt,payload:t}),sessionStorage.setItem("deviceList",JSON.stringify(n().devices.deviceList)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:Rt,payload:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(ee.jsx)(E.a,{children:Object(ee.jsx)(va.a,{component:Fe.a,sx:{boxShadow:6},children:Object(ee.jsxs)(fa.a,{sx:{minWidth:650},children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{children:"Name"}),Object(ee.jsx)(ga.a,{align:"center",children:"Mobile Number"}),Object(ee.jsx)(ga.a,{align:"center",children:"Groups Added"}),Object(ee.jsx)(ga.a,{align:"center",children:"Tracking Status"}),Object(ee.jsx)(ga.a,{align:"center",children:"Action"})]})}),Object(ee.jsx)(xa.a,{children:c.map((function(e){return Object(ee.jsxs)(Sa.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(ee.jsx)(ga.a,{component:"th",scope:"row",children:e.fullName}),Object(ee.jsxs)(ga.a,{align:"center",children:["+91 ",e.phoneNumber]}),0===e.groups.length?Object(ee.jsx)(ga.a,{align:"center",children:"--"}):Object(ee.jsx)(ga.a,{align:"center",children:e.groups.map((function(t,a){return Object(ee.jsxs)(ee.Fragment,{children:[t.groupName,a!==e.groups.length-1&&Object(ee.jsx)(ee.Fragment,{children:" ,"})]})}))}),Object(ee.jsxs)(ga.a,{align:"center",children:["accepted"===e.trackingStatus&&Object(ee.jsx)(mn.a,{label:"Accepted",color:"success"}),"rejected"===e.trackingStatus&&Object(ee.jsx)(mn.a,{label:"Rejected",color:"error"}),"pending"===e.trackingStatus&&Object(ee.jsx)(mn.a,{label:"Pending",color:"warning"})]}),Object(ee.jsxs)(ga.a,{align:"center",sx:{p:0},children:[Object(ee.jsx)(D.a,{edge:"end","aria-label":"edit",color:"primary",onClick:function(){return t(e)},children:Object(ee.jsx)(gn.a,{})}),Object(ee.jsx)(D.a,{color:"error",onClick:function(){return o(e)},children:Object(ee.jsx)(fn.a,{})})]})]},e._id)}))})]})})})},wn=y.a.memo(Sn),Cn=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)}}})),kn={PaperProps:{style:{maxHeight:224,width:250}}},Nn=function(){var e=Cn(),t=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,a=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null,n=Object(v.useState)(""),c=Object(x.a)(n,2),r=c[0],o=c[1],d=Object(v.useState)(""),j=Object(x.a)(d,2),p=j[0],b=j[1],h=Object(v.useState)([]),m=Object(x.a)(h,2),O=m[0],f=m[1],g=Object(v.useState)(!1),y=Object(x.a)(g,2),S=y[0],w=y[1],C=Object(v.useState)({}),k=Object(x.a)(C,2),N=k[0],D=k[1],I=Object(v.useState)(!1),A=Object(x.a)(I,2),L=A[0],T=A[1],P=Object(v.useState)(!1),M=Object(x.a)(P,2),G=M[0],F=M[1],H=Object(v.useState)(!1),z=Object(x.a)(H,2),U=z[0],W=z[1],B=Object(v.useState)(null),J=Object(x.a)(B,2),V=J[0],q=J[1],K=Object(v.useState)(null),Z=Object(x.a)(K,2),X=Z[0],Q=Z[1],$=Object(v.useState)(null),te=Object(x.a)($,2),ae=te[0],ne=te[1],ce=Object(s.b)(),re=Object(s.c)((function(e){return e.groups})).groupList,se=Object(s.c)((function(e){return e.devices})),oe=se.success,ie=se.error,le=se.deviceList,ue=Object(u.g)(),de=$a().state;Object(v.useEffect)((function(){sessionStorage.getItem("authToken")||ue("/login")}),[]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(de);case 2:t=e.sent,ne(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===a&&null!==t&&ce(Vt(t.uid)),null===a||null===t){e.next=7;break}return e.next=4,qe.a.get("".concat(Ze,"/get/admin/").concat(a.email));case 4:n=e.sent,c=n.data,ce(Yt({createdBy:t.uid,adminGroups:c.groups}));case 7:case"end":return e.stop()}}),e)}))),[ce]),Object(v.useEffect)((function(){oe&&(q(oe),W(!0)),void 0!==ie&&(Q(ie),W(!0))}),[oe,ie]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Device added succssfully"!==oe){e.next=10;break}if(0===p.length){e.next=6;break}return e.next=4,pe();case 4:return e.next=6,be();case 6:b(""),f([]),o(""),T(!1);case 10:case"end":return e.stop()}}),e)}))),[oe]);var je=function(e,t){"clickaway"!==t&&(W(!1),Q(null),q(null))},pe=function(){var e=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.c)(Y,"trackingRequest",p,"requests"),e.next=3,Object(R.b)(a,{requestStatus:"pending",companyName:t.companyName,recieverFullName:r,sender:{id:t.uid,profilePhoto:t.profilePhoto},createdAt:R.a.now()}).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.c)(Y,"trackingAndroidNotification",p,"notifications"),e.next=3,Object(R.b)(a,{message:"".concat(t.companyName," has send you a tracking request"),status:"pending",sender:{id:t.uid,profilePhoto:t.profilePhoto},createdAt:R.a.now(),seen:!1}).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(l.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==ae){e.next=6;break}return Q("You do not have any subscription. Please choose a plan"),W(!0),e.abrupt("return");case 6:if(le.length!==ae.deviceCount){e.next=12;break}return Q("You have used your device quota. Please upgrade your subscription"),W(!0),e.abrupt("return");case 12:if(10===p.length){e.next=18;break}return Q("Phone number must be 10 digit long"),W(!0),e.abrupt("return");case 18:if(0!==r.length){e.next=22;break}return Q("Full name is required"),W(!0),e.abrupt("return");case 22:a={fullName:r,phoneNumber:p,groups:O,createdBy:t.uid,trackingStatus:"pending"},ce(Jt(a));case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(E.a,{sx:{width:"100%",p:4},children:[Object(ee.jsx)("h2",{children:"Manage Mobile Devices"}),Object(ee.jsx)(E.a,{sx:{width:"100%",display:"flex",justifyContent:"flex-end",flexDirection:"row",gap:2},children:Object(ee.jsx)(na.a,{variant:"contained",sx:{py:1.2},onClick:function(){return T(!0)},children:"Add New Device"})}),Object(ee.jsx)(E.a,{sx:{mt:5},children:Object(ee.jsx)(wn,{toggleEditDeviceDialog:function(e){S?w(!1):(D(e),w(!0))},scheduleDialog:G,setScheduleDialog:F})}),Object(ee.jsxs)(un.a,{open:L,onClose:function(){return T(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:22},children:"Add New Device"}),Object(ee.jsx)(jn.a,{sx:{width:500},children:Object(ee.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"fullName",label:"Full Name",name:"fullName",autoComplete:"name",autoFocus:!0,value:r,onChange:function(e){return o(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"phoneNumber",label:"Phone Number",name:"phoneNumber",value:p,onChange:function(e){return b(e.target.value)}}),Object(ee.jsxs)(Ea.a,{margin:"normal",fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"device-group",children:"Select Group"}),Object(ee.jsx)(Ta.a,{labelId:"device-group",label:"Select Group",value:O,onChange:function(e){var t=e.target.value;f("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:function(e){return e.join(", ")},MenuProps:kn,children:re.map((function(e){return Object(ee.jsxs)(Me.a,{value:e._id,children:[Object(ee.jsx)(ra.a,{checked:O.indexOf(e._id)>-1}),Object(ee.jsx)(_.a,{primary:e.groupName})]},e._id)}))})]})]})}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return T(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return he()},children:"Save Device"})]})]}),Object(ee.jsx)(hn,{editDialogOpen:S,setEditDialogOpen:w,selectedDevice:N,trackingGroups:re,setSuccess:q,setError:Q,setSnackOpen:W}),V&&Object(ee.jsx)(Ue.a,{open:U,autoHideDuration:4e3,onClose:je,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:je,severity:"success",sx:{width:"100%"},variant:"filled",children:V})}),X&&Object(ee.jsx)(Ue.a,{open:U,autoHideDuration:4e3,onClose:je,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:je,severity:"error",sx:{width:"100%"},variant:"filled",children:X})})]})},Dn=a(151),In=(a(212),{PaperProps:{style:{maxHeight:224,width:250}}}),An=function(e){var t=e.trackingGroups,a=e.setDialogOpen,n=e.open,c=e.selectedHotspot,r=Object(v.useRef)(),o=Object(v.useState)(""),u=Object(x.a)(o,2),d=u[0],j=u[1],p=Object(v.useState)([]),b=Object(x.a)(p,2),h=b[0],m=b[1],O=Object(v.useState)([]),f=Object(x.a)(O,2),g=(f[0],f[1],Object(v.useState)("")),y=Object(x.a)(g,2),S=y[0],C=y[1],k=Object(v.useState)(28.6077159025),N=Object(x.a)(k,2),D=N[0],I=N[1],A=Object(v.useState)(77.224249103),E=Object(x.a)(A,2),L=E[0],T=E[1],P=Object(v.useState)(0),M=Object(x.a)(P,2),G=M[0],F=M[1],H=Object(v.useState)({width:"100%",height:400,latitude:D,longitude:L,zoom:15}),z=Object(x.a)(H,2),U=z[0],W=z[1],B=Object(v.useState)(!1),R=Object(x.a)(B,2),J=R[0],V=R[1],Y=Object(s.b)();Object(v.useEffect)((function(){if(0!==Object.entries(c).length){j(c.hotspotName);var e=c.groups,t=[];e.forEach((function(e){return t.push(e._id)})),m(t),Z(c.location.latitude,c.location.longitude),W(Object(w.a)(Object(w.a)({},U),{},{latitude:c.location.latitude,longitude:c.location.longitude})),I(c.location.latitude),T(c.location.longitude)}}),[c]);var q=Object(v.useCallback)((function(e){return W(e)}),[]),K=Object(v.useCallback)((function(e){return Z(e.latitude,e.longitude),q(Object(w.a)(Object(w.a)({},e),{transitionDuration:1e3}))}),[]),Z=function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qe.a.get("".concat(Ze,"/getlatlong/").concat(t,"/").concat(a)).then((function(e){C(e.data.formattedAddress),F(e.data.zipcode),V(!1)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e={_id:c._id,hotspotName:d,location:{latitude:Number(D.toPrecision(6)),longitude:Number(L.toPrecision(6)),zipCode:G},groups:h};Y(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.put("".concat(Ze,"/update/hotspot"),e,c);case 4:r=t.sent,s=r.data,a({type:Ot,payload:s}),sessionStorage.setItem("hotspotList",JSON.stringify(n().hotspots.hotspotList)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:ft,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(e)),a(!1)};return Object(ee.jsxs)(un.a,{open:n,onClose:function(){return a(!1)},children:[Object(ee.jsxs)(jn.a,{sx:{width:"1200"},children:[Object(ee.jsxs)("form",{noValidate:!0,style:{marginBottom:"20px"},children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"hotspotName",label:"Hotspot Name",name:"hotspotName",autoFocus:!0,value:d,onChange:function(e){return j(e.target.value)}}),Object(ee.jsxs)(Ea.a,{margin:"normal",fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"device-group",children:"Select Group"}),Object(ee.jsx)(Ta.a,{labelId:"device-group",label:"Select Group",value:h,onChange:function(e){var t=e.target.value;m("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:function(e){return e.join(", ")},MenuProps:In,children:t.map((function(e){return Object(ee.jsxs)(Me.a,{value:e._id,children:[Object(ee.jsx)(ra.a,{checked:h.indexOf(e._id)>-1}),Object(ee.jsx)(_.a,{primary:e.groupName})]},e._id)}))})]}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"location",label:"Set Location",name:"location",value:S,onChange:function(e){}})]}),Object(ee.jsxs)(Ve.d,Object(w.a)(Object(w.a)({},U),{},{ref:r,mapboxApiAccessToken:Xe,mapStyle:Qe,onViewportChange:function(e){return W(e)},onClick:function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(t.lngLat[1]),T(t.lngLat[0]),V(!0),Z(t.lngLat[1],t.lngLat[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(ee.jsx)(Dn.a,{mapRef:r,onViewportChange:K,mapboxApiAccessToken:Xe,position:"top-left",marker:!0,countries:"IN",reverseGeocode:!0}),Object(ee.jsx)(Ve.b,{latitude:D,longitude:L,children:Object(ee.jsx)("button",{className:"marker-btn",children:Object(ee.jsx)("img",{alt:"Image",src:"https://www.nbp.co.uk/Content/Images/uploaded/contact-branch-details.png"})})},"1")]}))]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return a(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{disabled:J,onClick:function(){return X()},children:"Update"})]})]})},En=function(e){e.open,e.success,e.error;var t=e.toggleEditHotspotDialog,a=(sessionStorage.getItem("userData")&&JSON.parse(sessionStorage.getItem("userData")),sessionStorage.getItem("adminData")&&JSON.parse(sessionStorage.getItem("adminData")),Object(s.b)()),n=Object(s.c)((function(e){return e.hotspots})).hotspotList,c=function(e){var t;a((t=e._id,function(){var e=Object(l.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.a.delete("".concat(Ze,"/delete/hotspot/").concat(t));case 3:a({type:xt,payload:t}),sessionStorage.setItem("hotspotList",JSON.stringify(n().hotspots.hotspotList)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:gt,payload:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(ee.jsx)(E.a,{children:Object(ee.jsx)(va.a,{component:Fe.a,sx:{boxShadow:6},children:Object(ee.jsxs)(fa.a,{sx:{minWidth:650},"aria-label":"simple table",children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{children:"Hotspot Name"}),Object(ee.jsx)(ga.a,{align:"center",children:"Address (Zip Code)"}),Object(ee.jsx)(ga.a,{align:"center",children:"Groups Added"}),Object(ee.jsx)(ga.a,{align:"center",children:"Action"})]})}),Object(ee.jsx)(xa.a,{children:n.map((function(e){return Object(ee.jsxs)(Sa.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(ee.jsx)(ga.a,{component:"th",scope:"row",children:e.hotspotName}),Object(ee.jsx)(ga.a,{align:"center",children:e.location.zipCode}),Object(ee.jsxs)(ga.a,{align:"center",sx:{display:"flex",justifyContent:"center"},children:[0===e.groups.length&&Object(ee.jsx)(ee.Fragment,{children:"---"}),e.groups.map((function(t,a){return Object(ee.jsx)("div",{children:Object(ee.jsxs)(fe.a,{variant:"p",component:"p",children:[t.groupName,a!==e.groups.length-1&&Object(ee.jsx)(ee.Fragment,{children:" ,"})]})},a)}))]}),Object(ee.jsxs)(ga.a,{align:"center",sx:{p:0},children:[Object(ee.jsx)(D.a,{edge:"end","aria-label":"edit",color:"primary",onClick:function(){return t(e)},sx:{mr:.2},children:Object(ee.jsx)(gn.a,{})}),Object(ee.jsx)(D.a,{color:"error",onClick:function(){return c(e)},children:Object(ee.jsx)(fn.a,{})})]})]},e._id)}))})]})})})},Ln={PaperProps:{style:{maxHeight:224,width:250}}},Tn=function(){var e=Object(v.useRef)(),t=Object(v.useState)(""),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)([]),o=Object(x.a)(r,2),d=o[0],j=o[1],p=Object(v.useState)(""),b=Object(x.a)(p,2),h=b[0],m=b[1],O=Object(v.useState)(28.6077159025),f=Object(x.a)(O,2),g=f[0],y=f[1],S=Object(v.useState)(77.224249103),C=Object(x.a)(S,2),k=C[0],N=C[1],D=Object(v.useState)(0),I=Object(x.a)(D,2),A=I[0],L=I[1],T=Object(v.useState)({width:"100%",height:400,latitude:28.6077159025,longitude:77.224249103,zoom:15}),P=Object(x.a)(T,2),M=P[0],G=P[1],F=Object(v.useState)({}),H=Object(x.a)(F,2),z=H[0],U=H[1],W=Object(v.useState)(!1),B=Object(x.a)(W,2),R=B[0],J=B[1],V=Object(v.useState)(!1),Y=Object(x.a)(V,2),q=Y[0],K=Y[1],Z=Object(v.useState)(!1),X=Object(x.a)(Z,2),Q=X[0],$=X[1],te=Object(v.useState)(null),ae=Object(x.a)(te,2),ne=ae[0],ce=ae[1],re=Object(v.useState)(null),se=Object(x.a)(re,2),oe=se[0],ie=se[1],le=Object(v.useState)({width:"100%",height:"100%",latitude:28.52,longitude:77.402,zoom:10}),ue=Object(x.a)(le,2),de=ue[0],je=ue[1],pe=Object(v.useState)(!1),be=Object(x.a)(pe,2),he=be[0],me=be[1],Oe=Object(v.useState)(!1),fe=Object(x.a)(Oe,2),xe=fe[0],ge=fe[1],ve=Object(v.useState)(null),ye=Object(x.a)(ve,2),Se=ye[0],we=ye[1],Ce=Object(v.useState)(null),ke=Object(x.a)(Ce,2),Ne=ke[0],De=ke[1],Ie=Object(v.useState)({}),Ae=Object(x.a)(Ie,2),Te=Ae[0],Pe=Ae[1],_e=Object(v.useState)(null),Ge=Object(x.a)(_e,2),Fe=Ge[0],He=Ge[1],ze=Object(s.b)(),Be=Object(s.c)((function(e){return e.hotspots})),Re=Be.hotspotList,Je=Be.success,Ye=Be.error,Ke=Object(s.c)((function(e){return e.groups})).groupList,$e=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,et=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null,tt=Object(u.g)(),at=$a().state;Object(v.useEffect)((function(){sessionStorage.getItem("authToken")||tt("/login")}),[]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(at);case 2:t=e.sent,He(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==$e&&ze(ea(null===$e||void 0===$e?void 0:$e.uid));case 1:case"end":return e.stop()}}),e)}))),[ze]),Object(v.useEffect)((function(){Je&&(ce(Je),$(!0)),Ye&&(ie(Ye),$(!0))}),[Je,Ye]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===et&&null!==$e&&ze(Kt($e.uid)),null===et||null===$e){e.next=7;break}return e.next=4,qe.a.get("".concat(Ze,"/get/admin/").concat(et.email));case 4:t=e.sent,a=t.data,ze(qt({createdBy:$e.uid,adminGroups:a.groups}));case 7:case"end":return e.stop()}}),e)}))),[ze]),Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me(!0),qe.a.get("".concat(Ze,"/getlatlong/").concat(Se,"/").concat(Ne)).then((function(e){console.log(e),Pe(e.data),me(!1)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[Se,Ne]);var nt=Object(v.useCallback)((function(e){return G(e)}),[]),ct=Object(v.useCallback)((function(e){return st(e.latitude,e.longitude),nt(Object(w.a)(Object(w.a)({},e),{transitionDuration:1e3}))}),[]),rt=function(e,t){"clickaway"!==t&&($(!1),ie(null),ce(null))},st=function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qe.a.get("".concat(Ze,"/getlatlong/").concat(t,"/").concat(a)).then((function(e){m(e.data.formattedAddress),L(e.data.zipcode)})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ot=function(){if(null===Fe)return ie("You do not have any subscription. Please choose a plan"),void $(!0);if(Re.length===Fe.hotspotCount)return ie("You have used your hotspot quota. Please upgrade your subscription"),void $(!0);if(n.length<3)return ie("Hotspot name must be atleast 3 characters"),void $(!0);var e,t={hotspotName:n,groups:d,createdBy:$e.uid,location:{latitude:Number(g.toPrecision(6)),longitude:Number(k.toPrecision(6)),zipCode:A}};ze((e=t,function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},r={body:e},t.next=5,qe.a.post("".concat(Ze,"/create/hotspot"),r,c);case 5:s=t.sent,o=s.data,a({type:pt,payload:o}),sessionStorage.setItem("hotspotList",JSON.stringify(n().hotspots.hotspotList)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:bt,payload:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,a){return t.apply(this,arguments)}}())),K(!1),c(""),j([]),m("")};return Object(ee.jsxs)(E.a,{sx:{width:"100%",p:4,height:"100%"},children:[Object(ee.jsx)("h2",{children:"Manage Hotspots"}),Object(ee.jsxs)(Ee.a,{container:!0,spacing:2,sx:{height:"100%"},children:[Object(ee.jsxs)(Ee.a,{item:!0,xs:12,md:6,children:[Object(ee.jsx)(E.a,{sx:{width:"100%",display:"flex",justifyContent:"flex-end",flexDirection:"row",gap:2},children:Object(ee.jsx)(na.a,{variant:"contained",sx:{py:1.2},onClick:function(){return K(!0)},children:"Add New Hotspot"})}),Object(ee.jsx)(E.a,{sx:{my:5},children:Object(ee.jsx)(En,{successMsg:ce,errorMsg:ie,open:$,toggleEditHotspotDialog:function(e){R?J(!1):(U(e),J(!0))}})})]}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,md:6,sx:{height:"100"},children:Object(ee.jsxs)(Ve.d,Object(w.a)(Object(w.a)({},de),{},{mapboxApiAccessToken:Xe,mapStyle:Qe,onViewportChange:function(e){return je(e)},children:[Re.map((function(e){return Object(ee.jsx)(Ve.b,{latitude:e.location.latitude,longitude:e.location.longitude,children:Object(ee.jsx)("button",{className:"marker-btn",onMouseEnter:function(t){t.preventDefault(),ge(!0),we(e.location.latitude),De(e.location.longitude)},onMouseLeave:function(e){e.preventDefault(),ge(!1)},children:Object(ee.jsx)("img",{alt:"Image",src:"https://www.nbp.co.uk/Content/Images/uploaded/contact-branch-details.png"})})},e._id)})),xe?Object(ee.jsx)(Ve.c,{latitude:Se,longitude:Ne,onClose:function(){ge(!1),we(0),De(0)},children:Object(ee.jsx)("div",{children:he?Object(ee.jsx)("p",{children:"Fetching Location ..."}):Object(ee.jsx)("p",{children:Te.formattedAddress})})}):null]}))})]}),Object(ee.jsxs)(un.a,{open:q,onClose:function(){return K(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:22},children:"Add New Hotspot"}),Object(ee.jsxs)(jn.a,{sx:{width:600},children:[Object(ee.jsxs)("form",{noValidate:!0,style:{marginBottom:"20px"},children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"hotspotName",label:"Hotspot Name",name:"hotspotName",autoFocus:!0,value:n,onChange:function(e){return c(e.target.value)}}),Object(ee.jsxs)(Ea.a,{margin:"normal",fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"device-group",children:"Select Group"}),Object(ee.jsx)(Ta.a,{labelId:"device-group",label:"Select Group",value:d,onChange:function(e){var t=e.target.value;j("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:function(e){return e.join(", ")},MenuProps:Ln,children:Ke.map((function(e){return Object(ee.jsxs)(Me.a,{value:e._id,children:[Object(ee.jsx)(ra.a,{checked:d.indexOf(e._id)>-1}),Object(ee.jsx)(_.a,{primary:e.groupName})]},e._id)}))})]}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"location",label:"Set Location",name:"location",value:h,onChange:function(e){}})]}),Object(ee.jsxs)(Ve.d,Object(w.a)(Object(w.a)({},M),{},{ref:e,mapboxApiAccessToken:Xe,mapStyle:Qe,onViewportChange:function(e){return G(e)},onClick:function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t.lngLat[1]),N(t.lngLat[0]),st(t.lngLat[1],t.lngLat[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(ee.jsx)(Dn.a,{mapRef:e,onViewportChange:ct,mapboxApiAccessToken:Xe,position:"top-left",marker:!0,countries:"IN",reverseGeocode:!0}),Object(ee.jsx)(Ve.b,{latitude:g,longitude:k,children:Object(ee.jsx)("button",{className:"marker-btn",children:Object(ee.jsx)("img",{alt:"Image",src:"https://www.nbp.co.uk/Content/Images/uploaded/contact-branch-details.png"})})},"1")]}))]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return K(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return ot()},children:"Save Hotspot"})]})]}),Object(ee.jsx)(An,{open:R,setDialogOpen:J,selectedHotspot:z,trackingGroups:Ke,setSnackOpen:$,setSuccessMsg:ce,setErrorMsg:ie}),null!==ne&&Object(ee.jsx)(Ue.a,{open:Q,autoHideDuration:4e3,onClose:rt,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:rt,severity:"success",variant:"filled",sx:{width:"100%"},children:ne})}),null!==oe&&Object(ee.jsx)(Ue.a,{open:Q,autoHideDuration:4e3,onClose:rt,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:rt,severity:"error",variant:"filled",sx:{width:"100%"},children:oe})})]})},Pn=a(235),_n=a.n(Pn),Mn=function(e){var t=e.open,a=e.success,n=e.error,c=Object(v.useState)(""),r=Object(x.a)(c,2),s=r[0],o=r[1],u=Object(v.useState)(""),d=Object(x.a)(u,2),j=d[0],p=d[1],b=Object(v.useState)(!1),h=Object(x.a)(b,2),m=h[0],O=h[1],f=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,g=function(){var e=Object(l.a)(i.a.mark((function e(){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{O(!0),c=q.currentUser,r=B.a.credential(f.email,s),Object(B.e)(c,r).then((function(){Object(B.h)(c,j).then((function(){a("Password updated successfully"),t(!0),p(""),o(""),O(!1)})).catch((function(e){var a=e.code,c=e.message;n("".concat(a," ").concat(c)),t(!0),O(!1)}))})).catch((function(e){var a=e.code,c=e.message;n("".concat(a," ").concat(c)),t(!0),O(!1)}))}catch(i){n(i),t(!0),O(!1)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsx)(E.a,{children:Object(ee.jsxs)("form",{noValidate:!0,children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"Current Password",name:"password",autoComplete:"name",value:s,onChange:function(e){return o(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"New Password",name:"password",autoComplete:"name",value:j,onChange:function(e){return p(e.target.value)}}),Object(ee.jsx)(na.a,{sx:{py:1.2,px:4,fontSize:15,mt:2},variant:"contained",onClick:function(){return g()},startIcon:m&&Object(ee.jsx)(ha.a,{size:20,color:"inherit"}),children:"Update Password"})]})})},Gn=Object(p.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)}}})),Fn=function(){var e=Gn(),t=Object(v.useState)(""),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)(""),s=Object(x.a)(r,2),o=s[0],u=s[1],d=Object(v.useState)(""),j=Object(x.a)(d,2),p=j[0],b=j[1],h=Object(v.useState)(""),m=Object(x.a)(h,2),O=m[0],f=m[1],g=Object(v.useState)(null),y=Object(x.a)(g,2),S=y[0],w=y[1],C=Object(v.useState)(null),k=Object(x.a)(C,2),N=k[0],I=k[1],A=Object(v.useState)(!1),L=Object(x.a)(A,2),T=L[0],_=L[1],M=Object(v.useState)(!1),G=Object(x.a)(M,2),F=G[0],H=G[1],z=Object(v.useState)(null),U=Object(x.a)(z,2),W=U[0],B=U[1],V=Object(v.useState)(null),q=Object(x.a)(V,2),Z=q[0],X=q[1],Q=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null;Object(v.useEffect)((function(){null!==Q&&(f(Q.profilePhoto),c(Q.firstName),b(Q.companyName),u(Q.lastName))}),[]);var $=function(e,t){"clickaway"!==t&&(H(!1),X(null),B(null))},te=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,_(!0),e.next=4,ae().then(function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(R.d)(Y,"trackerWebUser",Q.uid),e.next=3,Object(R.o)(a,{firstName:n,lastName:o,companyName:p,profilePhoto:t}).then((function(){var e={firstName:n,lastName:o,companyName:p,profilePhoto:t,uid:Q.uid,createdAt:Q.createdAt,email:Q.email};sessionStorage.setItem("userData",JSON.stringify(e)),B("Profile updated successfully"),H(!0),I(null),w(null),f(t),_(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){X(e.message),H(!0),_(!1)}));case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(0),X(e.t0.message),H(!0),_(!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(S,O,N),e.abrupt("return",new Promise((function(e){null===S&&e(Q.profilePhoto);var t=Object(J.c)(K,"superAdmin/profile/".concat(Q.uid)),a=Object(J.d)(t,N);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+t+"% done"),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}}),(function(e){console.log(e.message)}),(function(){Object(J.a)(a.snapshot.ref).then((function(t){e(t)}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(E.a,{sx:{width:"100%",p:4,display:"flex",justifyContent:"center"},children:[Object(ee.jsxs)(E.a,{sx:{width:"70%"},children:[Object(ee.jsxs)(Ee.a,{container:!0,spacing:2,children:[Object(ee.jsxs)(Ee.a,{item:!0,md:5,sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[Object(ee.jsx)(P.a,{src:null===S?O:S,alt:"profiile photo",sx:{my:1.5,width:200,height:200}}),Object(ee.jsxs)(D.a,{component:"label",sx:{width:50,height:50},children:[Object(ee.jsx)(_n.a,{}),Object(ee.jsx)("input",{type:"file",hidden:!0,onChange:function(e){var t=e.target.files[0];if(t){I(t);var a=URL.createObjectURL(t);w(a)}},accept:"image/*"})]})]}),Object(ee.jsx)(Ee.a,{item:!0,md:7,children:Object(ee.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"firstName",label:"First Name",name:"firstName",autoComplete:"name",autoFocus:!0,value:n,onChange:function(e){return c(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"name",value:o,onChange:function(e){return u(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Company Name",name:"companyName",autoComplete:"text",value:p,onChange:function(e){return b(e.target.value)}}),Object(ee.jsx)(na.a,{variant:"contained",onClick:function(){return te()},sx:{py:1.2,px:4,fontSize:15,mt:2,mb:4},startIcon:T&&Object(ee.jsx)(ha.a,{size:20,color:"inherit"}),children:"Update Profile"})]})})]}),Object(ee.jsxs)(Ee.a,{container:!0,spacing:2,children:[Object(ee.jsx)(Ee.a,{item:!0,md:5}),Object(ee.jsx)(Ee.a,{item:!0,md:7,children:Object(ee.jsx)(Mn,{open:H,success:B,error:X})})]})]}),null!==W&&Object(ee.jsx)(Ue.a,{open:F,autoHideDuration:4e3,onClose:$,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:$,severity:"success",sx:{width:"100%"},children:W})}),null!==Z&&Object(ee.jsx)(Ue.a,{open:F,autoHideDuration:4e3,onClose:$,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:$,severity:"error",sx:{width:"100%"},children:Z})})]})},Hn=function(e){var t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return Object(ee.jsxs)(E.a,{children:[Object(ee.jsxs)(E.a,{sx:{display:"flex",justifyContent:"space-between",gap:2,mt:2},children:[Object(ee.jsxs)(Ea.a,{fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"Start Day",children:"Start Day"}),Object(ee.jsx)(Ta.a,{labelId:"Start Day",value:e.startDay,onChange:function(t){return e.setStartDay(t.target.value)},label:"Start Day",children:t.map((function(e,t){return Object(ee.jsx)(Me.a,{value:e,sx:{p:1.2},children:e},t)}))})]}),Object(ee.jsxs)(Ea.a,{fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"End Day",children:"End Day"}),Object(ee.jsx)(Ta.a,{labelId:"Emd Day",value:e.endDay,onChange:function(t){return e.setEndDay(t.target.value)},label:"End Day",children:t.map((function(e,t){return Object(ee.jsx)(Me.a,{value:e,sx:{p:1.2},children:e},t)}))})]})]}),Object(ee.jsx)(E.a,{sx:{height:"58px",display:"flex",mb:2,mt:3},children:Object(ee.jsx)(yn.a,{disableClock:!0,onChange:e.setTime,value:e.time,rangeDivider:"-- to --"})})]})},zn=y.a.memo(Hn),Un={PaperProps:{style:{maxHeight:224,width:250}}},Wn=function(e){var t=Object(v.useState)(""),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)([]),o=Object(x.a)(r,2),u=o[0],d=o[1],j=Object(v.useState)(""),p=Object(x.a)(j,2),b=p[0],h=p[1],m=Object(v.useState)(""),O=Object(x.a)(m,2),f=O[0],g=O[1],y=Object(v.useState)(["",""]),S=Object(x.a)(y,2),w=S[0],C=S[1],k=Object(s.b)(),N=Object(s.c)((function(e){return e.admins})).adminList,D=function(){if(null===e.subscription)return e.setError("You do not have any subscription. Please choose a plan"),void e.setSnackOpen(!0);if(e.groupList.length===e.subscription.groupCount)return e.setError("You have used your groups quota. Please upgrade your subscription"),void e.setSnackOpen(!0);if(n.length<4)return e.setError("Group name must be atleast 4 characters"),void e.setSnackOpen(!0);var t,a={groupName:n,createdBy:e.createdBy.id,members:[],hotspot:[],admins:u,schedule:{startDay:b,endDay:f,time:{startTime:w[0],endTime:w[1]}}};k((t=a,function(){var e=Object(l.a)(i.a.mark((function e(a,n){var c,r,s,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={headers:{"Content-Type":"application/json"}},r={body:t},e.next=5,qe.a.post("".concat(Ze,"/create/group"),r,c);case 5:s=e.sent,o=s.data,a({type:vt,payload:o}),sessionStorage.setItem("groupList",JSON.stringify(n().groups.groupList)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:yt,payload:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}())),e.setOpen(!1),d([]),c(""),h(""),g(""),C(["",""])};return Object(ee.jsxs)(un.a,{open:e.open,onClose:function(){return e.setOpen(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:22},children:"Add New Group"}),Object(ee.jsxs)(jn.a,{sx:{width:500},children:[Object(ee.jsx)(Le.a,{autoFocus:!0,margin:"normal",id:"groupName",label:"Group Name",type:"text",fullWidth:!0,variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),null!==e.subscription&&e.subscription.groupCount===Number.MAX_VALUE&&Object(ee.jsxs)(Ea.a,{margin:"normal",fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"admin",children:"Select Admin"}),Object(ee.jsx)(Ta.a,{labelId:"admin",label:"Select Admin",value:u,onChange:function(e){var t=e.target.value;d("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:function(e){return e.join(", ")},MenuProps:Un,children:N.map((function(e){return Object(ee.jsxs)(Me.a,{value:e._id,children:[Object(ee.jsx)(ra.a,{checked:u.indexOf(e._id)>-1}),Object(ee.jsx)(_.a,{primary:e.fullName})]},e._id)}))})]}),Object(ee.jsx)(zn,{startDay:b,endDay:f,setStartDay:h,setEndDay:g,time:w,setTime:C})]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return e.setOpen(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return D()},children:"Create"})]})]})},Bn=y.a.memo(Wn),Rn=function(e){var t=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,a=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null,n=Object(s.b)(),c=Object(s.c)((function(e){return e.groups})).groupList;Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==t&&null===a&&n(ea(t.uid));case 1:case"end":return e.stop()}}),e)}))),[n,t]);var r=function(e){var t;n((t=e._id,function(){var e=Object(l.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.a.delete("".concat(Ze,"/delete/group/").concat(t));case 3:a({type:Nt,payload:t}),sessionStorage.setItem("groupList",JSON.stringify(n().groups.groupList)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:Dt,payload:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(ee.jsx)(E.a,{children:Object(ee.jsx)(va.a,{component:Fe.a,children:Object(ee.jsxs)(fa.a,{"aria-label":"simple table",children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{sx:{fontWeight:600},children:"Group Name"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Admins"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Schedule"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Hotspot/s Added"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Created At"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Modified At"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Action"})]})}),Object(ee.jsx)(xa.a,{children:c.map((function(t){return Object(ee.jsxs)(Sa.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(ee.jsx)(ga.a,{component:"th",scope:"row",children:t.groupName}),Object(ee.jsxs)(ga.a,{align:"center",children:[0===t.admins.length&&Object(ee.jsx)(ee.Fragment,{children:"---"}),t.admins.map((function(e,a){return Object(ee.jsx)(y.a.Fragment,{children:"".concat(e.fullName,"\n                        ").concat(a!==t.admins.length-1?", ":"")},a)}))]}),0!==Object.entries(t.schedule).length?Object(ee.jsx)(ga.a,{align:"center",children:"".concat(t.schedule.startDay," to ").concat(t.schedule.endDay," , ").concat(t.schedule.time.startTime," to ").concat(t.schedule.time.endTime)}):Object(ee.jsx)(ga.a,{align:"center",children:"---"}),Object(ee.jsxs)(ga.a,{align:"center",children:[0===t.hotspots.length&&Object(ee.jsx)(ee.Fragment,{children:"---"}),t.hotspots.map((function(e,a){return Object(ee.jsx)(y.a.Fragment,{children:"".concat(e.hotspotName,"\n                        ").concat(a!==t.hotspots.length-1?" , ":"")},a)}))]}),Object(ee.jsx)(ga.a,{align:"center",component:"th",scope:"row",children:X()(t.createdAt).format("DD MMMM YYYY")}),Object(ee.jsx)(ga.a,{align:"center",component:"th",scope:"row",children:X()(t.updatedAt).format("DD MMMM YYYY")}),Object(ee.jsxs)(ga.a,{align:"center",sx:{p:0},children:[Object(ee.jsx)(D.a,{color:"success",onClick:function(){e.setSelectedGroup(t),e.setEditOpen(!0)},children:Object(ee.jsx)(gn.a,{})}),Object(ee.jsx)(D.a,{color:"error",onClick:function(){return r(t)},children:Object(ee.jsx)(fn.a,{})})]})]},t._id)}))})]})})})},Jn=y.a.memo(Rn),Vn={PaperProps:{style:{maxHeight:224,width:250}}},Yn=function(e){var t=Object(v.useState)(""),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)([]),o=Object(x.a)(r,2),u=o[0],d=o[1],j=Object(v.useState)("Sunday"),p=Object(x.a)(j,2),b=p[0],h=p[1],m=Object(v.useState)("Saturday"),O=Object(x.a)(m,2),f=O[0],g=O[1],y=Object(v.useState)(["10:00","11:00"]),S=Object(x.a)(y,2),w=S[0],C=S[1],k=Object(s.c)((function(e){return e.admins})),N=k.adminList,D=Object(s.b)();Object(v.useEffect)((function(){if(0!==Object.keys(e.selectedGroup).length){c(e.selectedGroup.groupName),h(e.selectedGroup.schedule.startDay),g(e.selectedGroup.schedule.endDay),C([e.selectedGroup.schedule.time.startTime,e.selectedGroup.schedule.time.endTime]);var t=e.selectedGroup.admins.map((function(e){return e._id}));d(t)}}),[e.selectedGroup]);var I=function(){if(n.length<3)return e.setError("Group Name length must be atleast 3"),void e.setSnackOpen(!0);if(0===k.length)return e.setError("Select atleast one admin"),void e.setSnackOpen(!0);var t={_id:e.selectedGroup._id,groupName:n,admins:u,schedule:{startDay:b,endDay:f,time:{startTime:w[0],endTime:w[1]}}};D(function(e){return function(){var t=Object(l.a)(i.a.mark((function t(a,n){var c,r,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,c={headers:{"Content-Type":"application/json"}},t.next=4,qe.a.put("".concat(Ze,"/update/group"),e,c);case 4:r=t.sent,s=r.data,a({type:Ct,payload:s}),sessionStorage.setItem("groupList",JSON.stringify(n().groups.groupList)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:kt,payload:t.t0.message});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,a){return t.apply(this,arguments)}}()}(t)),e.setOpen(!1),c(""),d([]),h("Sunday"),g("Sunday"),C(["10:00","11:00"])};return Object(ee.jsxs)(un.a,{open:e.open,onClose:function(){return e.setOpen(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:22},children:"Edit Group Details"}),Object(ee.jsxs)(jn.a,{sx:{width:500},children:[Object(ee.jsx)(Le.a,{autoFocus:!0,margin:"normal",id:"groupName",label:"Group Name",type:"text",fullWidth:!0,variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(ee.jsxs)(Ea.a,{margin:"normal",fullWidth:!0,variant:"outlined",children:[Object(ee.jsx)(La.a,{id:"admin",children:"Select Admin"}),Object(ee.jsx)(Ta.a,{labelId:"admin",label:"Select Admin",value:u,onChange:function(e){var t=e.target.value;d("string"===typeof t?t.split(","):t)},multiple:!0,renderValue:function(e){return e.join(", ")},MenuProps:Vn,children:N.map((function(e){return Object(ee.jsxs)(Me.a,{value:e._id,children:[Object(ee.jsx)(ra.a,{checked:u.indexOf(e._id)>-1}),Object(ee.jsx)(_.a,{primary:e.fullName})]},e._id)}))})]}),Object(ee.jsx)(zn,{startDay:b,endDay:f,setStartDay:h,setEndDay:g,time:w,setTime:C})]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return e.setOpen(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return I()},children:"Update"})]})]})},qn=y.a.memo(Yn),Kn=function(){var e=Object(v.useState)(!1),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(v.useState)(!1),r=Object(x.a)(c,2),o=r[0],d=r[1],j=Object(v.useState)({}),p=Object(x.a)(j,2),b=p[0],h=p[1],m=Object(v.useState)(!1),O=Object(x.a)(m,2),f=O[0],g=O[1],y=Object(v.useState)(null),S=Object(x.a)(y,2),w=S[0],C=S[1],k=Object(v.useState)(null),N=Object(x.a)(k,2),D=N[0],I=N[1],A=Object(v.useState)(null),L=Object(x.a)(A,2),T=L[0],P=L[1],_=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,M=Object(s.c)((function(e){return e.groups})),G=M.groupList,F=M.success,H=M.error,z=Object(u.g)(),U=$a().state;Object(v.useEffect)((function(){sessionStorage.getItem("authToken")||z("/login")}),[]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(U);case 2:t=e.sent,P(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.useEffect)((function(){F&&(C(F),g(!0)),void 0!==H&&(I(H),g(!0))}),[F,H]);var W=function(e,t){"clickaway"!==t&&(g(!1),I(null),C(null))};return Object(ee.jsxs)(E.a,{sx:{p:4},children:[Object(ee.jsx)("h2",{children:"Manage Groups"}),Object(ee.jsx)(Ge.a,{direction:"row",justifyContent:"flex-end",rowGap:2,columnGap:2,children:Object(ee.jsx)(na.a,{variant:"contained",sx:{py:1.2},onClick:function(){return n(!0)},children:"Create New Group"})}),Object(ee.jsx)(E.a,{sx:{my:5},children:Object(ee.jsx)(Jn,{success:C,error:I,open:g,setSelectedGroup:h,setEditOpen:d})}),Object(ee.jsx)(E.a,{children:Object(ee.jsx)(Bn,{open:a,setOpen:n,createdBy:{id:null===_||void 0===_?void 0:_.uid,fullName:"".concat(null===_||void 0===_?void 0:_.firstName," ").concat(null===_||void 0===_?void 0:_.lastName)},subscription:T,setError:I,setSnackOpen:g,setSuccess:C,groupList:G})}),Object(ee.jsx)(E.a,{children:Object(ee.jsx)(qn,{open:o,setOpen:d,selectedGroup:b,setError:I,setSnackOpen:g,setSuccess:C,createdBy:{id:null===_||void 0===_?void 0:_.uid,fullName:"".concat(null===_||void 0===_?void 0:_.firstName," ").concat(null===_||void 0===_?void 0:_.lastName)}})}),null!==F&&Object(ee.jsx)(Ue.a,{open:f,autoHideDuration:4e3,onClose:W,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:W,severity:"success",sx:{width:"100%"},variant:"filled",children:w})}),null!==H&&Object(ee.jsx)(Ue.a,{open:f,autoHideDuration:4e3,onClose:W,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:W,severity:"error",sx:{width:"100%"},variant:"filled",children:D})})]})},Zn=a(451),Xn=a(452),Qn=function(e){var t=Object(s.c)((function(e){return e.admins})).adminList,a=Object(s.b)(),n=function(e){var t;a((t=e._id,function(){var e=Object(l.a)(i.a.mark((function e(a,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe.a.delete("".concat(Ze,"/delete/admin/").concat(t));case 3:a({type:_t,payload:t}),sessionStorage.setItem("adminList",JSON.stringify(n().admins.adminList)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a({type:Mt,payload:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}()))};return Object(ee.jsx)(E.a,{children:Object(ee.jsx)(va.a,{component:Fe.a,sx:{boxShadow:6},children:Object(ee.jsxs)(fa.a,{sx:{minWidth:650},children:[Object(ee.jsx)(ya.a,{children:Object(ee.jsxs)(Sa.a,{children:[Object(ee.jsx)(ga.a,{className:"table-head",children:"Admin Name"}),Object(ee.jsx)(ga.a,{className:"table-head",align:"center",children:"Admin Id"}),Object(ee.jsx)(ga.a,{className:"table-head",align:"center",children:"Email"}),Object(ee.jsx)(ga.a,{className:"table-head",align:"center",children:"Groups"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Created At"}),Object(ee.jsx)(ga.a,{sx:{fontWeight:600},align:"center",children:"Modified At"}),Object(ee.jsx)(ga.a,{className:"table-head",align:"center",children:"Action"})]})}),Object(ee.jsx)(xa.a,{children:t.map((function(t){return Object(ee.jsxs)(Sa.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(ee.jsx)(ga.a,{component:"th",scope:"row",children:t.fullName}),Object(ee.jsx)(ga.a,{align:"center",children:t._id}),Object(ee.jsx)(ga.a,{align:"center",children:t.email}),Object(ee.jsxs)(ga.a,{align:"center",children:[0===t.groups.length&&Object(ee.jsx)(ee.Fragment,{children:"---"}),t.groups.map((function(e,a){return Object(ee.jsx)(y.a.Fragment,{children:"".concat(e.groupName," ").concat(a!==t.groups.length-1?", ":"")},a)}))]}),Object(ee.jsx)(ga.a,{align:"center",children:X()(t.createdAt).format("DD MMM YYYY")}),Object(ee.jsx)(ga.a,{align:"center",children:X()(t.updatedAt).format("DD MMMM YYYY")}),Object(ee.jsxs)(ga.a,{align:"center",sx:{p:0},children:[Object(ee.jsx)(D.a,{color:"success",onClick:function(){e.setSelectedAdmin(t),e.setShowEditDialog(!0)},children:Object(ee.jsx)(Zn.a,{})}),Object(ee.jsx)(D.a,{color:"error",onClick:function(){return n(t)},children:Object(ee.jsx)(Xn.a,{})})]})]},t._id)}))})]})})})},$n=y.a.memo(Qn),ec=function(e){var t=Object(v.useState)(""),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)(""),o=Object(x.a)(r,2),u=o[0],d=o[1],j=Object(s.b)();var p=function(){var t=Object(l.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null===e.subscription?(e.error("You do not have any subscription. Please choose a plan"),e.setSnackOpen(!0),0):e.adminList.length===e.subscription.adminCount?(e.error("You have used your admin quota. Please upgrade your subscription"),e.setSnackOpen(!0),0):""===n?(e.error("Full Name cannot be empty"),e.setSnackOpen(!0),0):""!==u&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(u)||(e.error("Invalid Email"),e.setSnackOpen(!0),0))){t.next=4;break}return a="#123321#",t.next=4,Object(B.b)(q,u,a).then(function(){var t=Object(l.a)(i.a.mark((function t(r){var s,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s={fullName:n,email:u,groups:[],createdBy:e.createdBy,passwordChanged:!1},j(Zt(s)),o={to:u,subject:"GPS Tracker login credentials for admin",body:"Your login credentials are:\nemail: ".concat(u,"\npassword: ").concat(a)},j($t(o)),c(""),d(""),e.setOpen(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){var t=e.code,a=e.message;alert(t,a)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(ee.jsxs)(un.a,{open:e.open,onClose:function(){return e.setOpen(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:16},children:"Create New Admin"}),Object(ee.jsxs)(jn.a,{sx:{width:500},children:[Object(ee.jsx)(Le.a,{fullWidth:!0,autoFocus:!0,margin:"normal",id:"name",label:"Full Name",type:"name",variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(ee.jsx)(Le.a,{fullWidth:!0,margin:"normal",id:"email",label:"Email Address",type:"email",variant:"outlined",value:u,onChange:function(e){return d(e.target.value)}})]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return e.setOpen(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return p()},children:"Create"})]})]})},tc=y.a.memo(ec),ac=function(e){var t=Object(v.useState)(""),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)(""),o=Object(x.a)(r,2),i=o[0],l=o[1],u=Object(s.b)();Object(v.useEffect)((function(){c(e.selectedAdmin.fullName),l(e.selectedAdmin.email)}),[e.selectedAdmin]);var d=function(){if(""===n?(e.error("Full Name cannot be empty"),e.setSnackOpen(!0),0):""!==i&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)||(e.error("Invalid Email"),e.setSnackOpen(!0),0)){var t={_id:e.selectedAdmin._id,fullName:n,email:i};u(Qt(t)),e.success("Admin Updated"),e.setSnackOpen(!0),c(""),l(""),e.setOpen(!1)}};return Object(ee.jsxs)(un.a,{open:e.open,onClose:function(){return e.setOpen(!1)},children:[Object(ee.jsx)(dn.a,{sx:{fontSize:18},children:"Edit Admin Details"}),Object(ee.jsxs)(jn.a,{sx:{width:500},children:[Object(ee.jsx)(Le.a,{fullWidth:!0,autoFocus:!0,margin:"normal",id:"name",label:"Full Name",type:"name",variant:"outlined",value:n,onChange:function(e){return c(e.target.value)}}),Object(ee.jsx)(Le.a,{fullWidth:!0,margin:"normal",id:"email",label:"Email Address",type:"email",variant:"outlined",value:i,onChange:function(e){return l(e.target.value)}})]}),Object(ee.jsxs)(pn.a,{children:[Object(ee.jsx)(na.a,{onClick:function(){return e.setOpen(!1)},children:"Cancel"}),Object(ee.jsx)(na.a,{onClick:function(){return d()},children:"Update"})]})]})},nc=y.a.memo(ac),cc=function(){var e=Object(v.useState)(!1),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(v.useState)(!1),r=Object(x.a)(c,2),o=r[0],d=r[1],j=Object(v.useState)({}),p=Object(x.a)(j,2),b=p[0],h=p[1],m=Object(v.useState)(!1),O=Object(x.a)(m,2),f=O[0],g=O[1],y=Object(v.useState)(null),S=Object(x.a)(y,2),w=S[0],C=S[1],k=Object(v.useState)(null),N=Object(x.a)(k,2),D=N[0],I=N[1],A=Object(v.useState)(null),L=Object(x.a)(A,2),T=L[0],P=L[1],_=sessionStorage.getItem("authToken"),M=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,G=Object(s.b)(),F=Object(u.g)(),H=$a().state,z=Object(s.c)((function(e){return e.admins})),U=z.adminList,W=z.success,B=z.error;Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tn(H);case 2:t=e.sent,P(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.useEffect)((function(){_||F("/login")}),[_]),Object(v.useEffect)((function(){null!==M&&G(Xt(M.uid))}),[G]);var R=function(e,t){"clickaway"!==t&&(g(!1),I(null),C(null))};return Object(ee.jsxs)(E.a,{sx:{p:4},children:[Object(ee.jsx)("h2",{children:"Manage Admins"}),Object(ee.jsx)(Ge.a,{direction:"row",justifyContent:"flex-end",children:Object(ee.jsx)(na.a,{variant:"contained",sx:{py:1.2},onClick:function(){n(!a)},children:"Create Admin"})}),Object(ee.jsx)(E.a,{sx:{my:5},children:Object(ee.jsx)($n,{setSelectedAdmin:h,setShowEditDialog:d})}),Object(ee.jsx)(E.a,{children:Object(ee.jsx)(tc,{open:a,setOpen:n,createdBy:null===M||void 0===M?void 0:M.uid,setSnackOpen:g,success:C,error:I,adminList:U,subscription:T})}),Object(ee.jsx)(E.a,{children:Object(ee.jsx)(nc,{open:o,setOpen:d,createdBy:null===M||void 0===M?void 0:M.uid,setSnackOpen:g,selectedAdmin:b,success:C,error:I})}),null!==W&&Object(ee.jsx)(Ue.a,{open:f,autoHideDuration:4e3,onClose:R,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:R,severity:"success",sx:{width:"100%"},variant:"filled",children:w})}),null!==B&&Object(ee.jsx)(Ue.a,{open:f,autoHideDuration:4e3,onClose:R,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:R,severity:"error",sx:{width:"100%"},variant:"filled",children:D})})]})},rc=["January","February","March","April","May","June","July","August","September","October","November","December"],sc=function(){var e=Object(v.useState)([]),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(v.useState)([]),r=Object(x.a)(c,2),s=r[0],o=r[1],u=Object(v.useState)([]),d=Object(x.a)(u,2),j=d[0],p=d[1],b=Object(v.useState)([]),h=Object(x.a)(b,2),m=h[0],O=h[1],f=Object(v.useState)([]),g=Object(x.a)(f,2),y=g[0],S=g[1],C=Object(v.useState)(!1),k=Object(x.a)(C,2),N=k[0],D=k[1],I=Object(v.useState)([]),A=Object(x.a)(I,2),L=A[0],T=A[1],P=Object(v.useState)([]),_=Object(x.a)(P,2),M=_[0],G=_[1],F=Object(v.useState)([]),H=Object(x.a)(F,2),z=H[0],U=H[1],W=Object(v.useState)([]),B=Object(x.a)(W,2),J=B[0],V=B[1],q=Object(v.useState)(rc[(new Date).getMonth()]),K=Object(x.a)(q,2),Z=K[0],X=K[1],Q=Object(v.useState)(!0),$=Object(x.a)(Q,2),te=$[0],ae=$[1],ne=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,ce=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null;Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,c,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(R.c)(Y,"trackingHotspots"),a=Object(R.l)(t,Object(R.p)("createdBy","==",ne.uid),Object(R.p)("groupId","array-contains-any",ce.groupId)),e.next=5,Object(R.g)(a);case 5:c=e.sent,r=[],c.forEach((function(e){r.push(Object(w.a)(Object(w.a)({},e.data()),{},{id:e.id}))})),s=r.map((function(e){return{hotspotName:e.hotspotName,id:e.id}})),n(s),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(R.c)(Y,"trackingGroups"),a=Object(R.l)(t,Object(R.p)("createdBy","==",ne.uid),Object(R.p)(Object(R.e)(),"in",ce.groupId)),e.next=5,Object(R.g)(a);case 5:n=e.sent,c=[],n.forEach((function(e){c.push(Object(w.a)(Object(w.a)({},e.data()),{},{id:e.id}))})),r=c.map((function(e){return{groupName:e.groupName,id:e.id}})),o(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(R.c)(Y,"trackingUsers"),a=Object(R.l)(t,Object(R.p)("senderId","==",ne.uid),Object(R.p)("groupId","array-contains-any",ce.groupId)),e.next=5,Object(R.g)(a);case 5:n=e.sent,c=[],r=[],n.forEach((function(e){c.push(Object(w.a)(Object(w.a)({},e.data()),{},{id:e.id})),r.push(e.data().phoneNumber)})),S(r),O(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var re=function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(R.c)(Y,"trackingAttendance",t.phoneNumber,ne.uid),r=Object(R.l)(c,Object(R.p)("hotspotId","==",a.id)),e.next=4,Object(R.g)(r).then((function(e){n({count:e.docs.length,hotspot:a.hotspotName})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=[],r=Object(ma.a)(a),e.prev=2,r.s();case 4:if((s=r.n()).done){e.next=12;break}return o=s.value,e.next=8,re(t,o);case 8:l=e.sent,c.push(l);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:n(c);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(l.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(l.a)(i.a.mark((function e(n){var c,r,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.map((function(e){return e.hotspotName})),r=Object(R.c)(Y,"trackingLocations",t.phoneNumber,"locations"),console.log(rc.indexOf(Z),Z),s=0!==M.length?Object(R.l)(r,Object(R.p)("trackerId","==",ne.uid),Object(R.p)("group","in",M),Object(R.p)("month","==",rc.indexOf(Z)+1),Object(R.k)("createdAt","desc"),Object(R.i)(100)):Object(R.l)(r,Object(R.p)("trackerId","==",ne.uid),Object(R.p)("hotspot","in",c),Object(R.p)("month","==",rc.indexOf(Z)+1),Object(R.k)("createdAt","desc"),Object(R.i)(100)),e.next=6,Object(R.g)(s);case 6:o=e.sent,l=[],o.forEach((function(e){var t=e.data();l.push(t)})),console.log(l),n(l);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ie=function(){var e=Object(l.a)(i.a.mark((function e(t,a){var n,c,r,s,o,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],c=Object(ma.a)(t),e.prev=2,c.s();case 4:if((r=c.n()).done){e.next=19;break}return s=r.value,o={},e.next=9,oe(s,a);case 9:return l=e.sent,e.next=12,se(s,a);case 12:u=e.sent,o.history=l,o.data=u,o.device={phoneNumber:s.phoneNumber,fullName:s.fullName},n.push(o);case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),c.e(e.t0);case 24:return e.prev=24,c.f(),e.finish(24);case 27:p(n),ae(!1);case 29:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})));return function(t,a){return e.apply(this,arguments)}}();Object(v.useEffect)((function(){0!==y.length&&0!==m.length&&(ae(!0),N||ie(m,a))}),[y,m,N]);var le=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,T("string"===typeof a?a.split(","):a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,G("string"===typeof a?a.split(","):a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!0),t=[],0!==L.length?(L.forEach((function(e){var n,c=a.filter((function(t){return t.hotspotName===e}));(n=t).push.apply(n,Object(ba.a)(c))})),D(!0)):(t=a,D(!1)),U(t),n=[],0!==J.length?(m.forEach((function(e){J.forEach((function(t,a){var c=t.split(" - ")[1];e.phoneNumber===c&&n.push(e)}))})),D(!0)):(n=m,D(!1)),0===M.length&&D(!1),e.next=9,ie(n,t);case 9:case"end":return e.stop()}}),e)}))),[J,L,M,Z]),Object(ee.jsxs)(E.a,{sx:{p:5},children:[Object(ee.jsxs)(E.a,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:4},children:[Object(ee.jsx)(Wa,{Months:rc,selectedMonth:Z,setSelectedMonth:X}),Object(ee.jsx)(Ga,{handleHotspotSelect:le,selectedHotspotNames:L,hotspotNames:a}),Object(ee.jsx)(Ja,{handleGroupSelect:ue,selectedGroupNames:M,groupNames:s}),Object(ee.jsx)(za,{handleSelectedDevice:function(e){var t=e.target.value;V("string"===typeof t?t.split(","):t)},selectedDevices:J,mobileDevices:m}),Object(ee.jsx)(na.a,{variant:"outlined",sx:{py:1.3,px:4,fontSize:15},children:"Export Report"})]}),Object(ee.jsx)(E.a,{sx:{my:4},children:te?Object(ee.jsx)(E.a,{sx:{display:"flex",justifyContent:"center",mt:"300px"},children:Object(ee.jsx)(ha.a,{color:"inherit"})}):Object(ee.jsx)(Aa,{tableData:j,hotspotNames:0===L.length?a:z})})]})},oc=Object(p.a)((function(e){return{image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},login:{margin:e.spacing(3,0,2),padding:e.spacing(1.4),fontSize:15},googleLogin:{margin:e.spacing(2,0,2),fontSize:15}}})),ic=function(){var e=oc(),t=Object(u.g)(),a=Object(v.useState)(""),n=Object(x.a)(a,2),c=n[0],r=n[1],o=Object(v.useState)(""),d=Object(x.a)(o,2),j=d[0],p=d[1],b=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null,h=Object(s.b)(),m=function(){var e=Object(l.a)(i.a.mark((function e(){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==b){e.next=2;break}return e.abrupt("return");case 2:if(!(j.length<6)){e.next=5;break}return alert("Password must be atleast 6 characters long."),e.abrupt("return");case 5:a=q.currentUser,n=B.a.credential(b.email,c),Object(B.e)(a,n).then((function(){Object(B.h)(a,j).then(Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={_id:b._id,passwordChanged:!0},h(Qt(t));case 2:case"end":return e.stop()}}),e)})))).then((function(){p(""),r(""),alert("Password updated successfully"),t("/app/dashboard",{replace:!0})})).catch((function(e){var t=e.code,a=e.message;alert(t,a)}))})).catch((function(e){var t=e.code,a=e.message;alert(t,a)}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(ee.jsxs)(Ee.a,{sx:{height:"100%"},container:!0,component:"main",className:e.root,children:[Object(ee.jsx)(ce.a,{}),Object(ee.jsx)(Ee.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,sm:8,md:5,component:Fe.a,elevation:6,square:!0,children:Object(ee.jsxs)("div",{className:e.paper,children:[Object(ee.jsx)(P.a,{className:e.avatar,children:Object(ee.jsx)(oa.a,{})}),Object(ee.jsx)(fe.a,{component:"h1",variant:"h1",sx:{mt:1,mb:4},children:"Change Password"}),Object(ee.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"Current Password",name:"password",autoComplete:"name",type:"password",value:c,onChange:function(e){return r(e.target.value)}}),Object(ee.jsx)(Le.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"New Password",name:"password",type:"password",autoComplete:"name",value:j,onChange:function(e){return p(e.target.value)}}),Object(ee.jsx)(na.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.login,onClick:function(){return m()},children:"Change Password"})]})]})})]})},lc=a(502),uc=a(456),dc=a(453),jc=a(149),pc=a.n(jc),bc=function(e){return Object(ee.jsxs)(lc.a,{className:"pricing-card pro",sx:{boxShadow:15,py:5,px:4},children:[Object(ee.jsxs)(E.a,{children:[Object(ee.jsxs)(Ge.a,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center",justifyContent:"space-between",children:[Object(ee.jsx)(fe.a,{variant:"h1",sx:{my:2,fontSize:40,color:"white"},children:"$".concat(e.value)}),e.isCurrent&&Object(ee.jsxs)(E.a,{sx:{display:"flex",alignItems:"center"},children:[Object(ee.jsx)("div",{style:{width:"15px",height:"15px",backgroundColor:"#4CAF50",borderRadius:"50%"}}),Object(ee.jsx)(fe.a,{variant:"h4",sx:{my:2,color:"#4CAF50",ml:1},children:"Active"})]})]}),Object(ee.jsx)(mn.a,{label:"Pro Account",variant:"outlined",className:"chip",sx:{my:2,color:"#fb8c00",border:"1.5px solid #fb8c00",width:"100%"}}),Object(ee.jsxs)(Ge.a,{direction:"row",justifyContent:"space-between",children:[Object(ee.jsxs)(fe.a,{variant:"h1",sx:{my:2,fontSize:40,color:"white"},children:["$1"," ",Object(ee.jsx)("span",{style:{color:"gray",fontSize:15,textTransform:"uppercase"},children:"/ user"})]}),Object(ee.jsx)(fe.a,{variant:"h1",sx:{my:2,fontSize:40,color:"white"},children:"".concat(e.value)})]}),Object(ee.jsxs)(Ge.a,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center",children:[Object(ee.jsx)(fe.a,{variant:"h5",color:"white",children:"0"}),Object(ee.jsx)(uc.a,{sx:{color:"whitesmoke"},value:e.value,onChange:e.handleValueChange,max:1e3}),Object(ee.jsx)(fe.a,{variant:"h5",color:"white",children:"1000"})]}),Object(ee.jsx)(A.a,{sx:{my:3},children:["Unlimited Hotspots","Unlimited Devices","Unlimited Groups","Unlimited Admins","Get Report of Unlimited Period"].map((function(e){return Object(ee.jsxs)(L.a,{disablePadding:!0,children:[Object(ee.jsx)(dc.a,{children:Object(ee.jsx)(pc.a,{htmlColor:"#4CAF50",sx:{fontSize:27,my:.5,ml:.5}})}),Object(ee.jsx)(_.a,{primary:e,sx:{color:"white"}})]},e)}))})]}),Object(ee.jsx)(na.a,{className:"pro-btn btn",variant:"contained",sx:{py:1.4,borderRadius:25,boxShadow:5},onClick:e.action,children:"Pay as you go"})]})},hc=a(236),mc=a.n(hc),Oc=function(e){return Object(ee.jsxs)(lc.a,{className:"pricing-card",sx:{py:5,px:4},children:[Object(ee.jsxs)(E.a,{children:[Object(ee.jsxs)(Ge.a,{spacing:2,direction:"row",sx:{mb:1},alignItems:"center",justifyContent:"space-between",children:[Object(ee.jsx)(fe.a,{variant:"h1",sx:{my:2,fontSize:40},children:"$0"}),e.isCurrent&&Object(ee.jsxs)(E.a,{sx:{display:"flex",alignItems:"center"},children:[Object(ee.jsx)("div",{style:{width:"15px",height:"15px",backgroundColor:"green",borderRadius:"50%"}}),Object(ee.jsx)(fe.a,{variant:"h4",sx:{my:2,color:"#4CAF50",ml:1},children:"Active"})]})]}),Object(ee.jsx)(mn.a,{label:"Free Account",variant:"outlined",className:"chip",sx:{my:2,color:"#e91e63",border:"1.5px solid #e91e63",width:"100%"}}),Object(ee.jsxs)(fe.a,{variant:"h1",sx:{my:2,fontSize:40},children:["$0"," ",Object(ee.jsx)("span",{style:{color:"gray",fontSize:15,textTransform:"uppercase"},children:"/ user"})]}),Object(ee.jsx)(A.a,{sx:{my:3,mt:8},children:["Only 10 Hotspots","Unlimited Devices","Only 2 Groups","No Admins","Get Report of last 1 month"].map((function(e,t){return Object(ee.jsxs)(L.a,{disablePadding:!0,children:[Object(ee.jsx)(dc.a,{children:1===t?Object(ee.jsx)(pc.a,{htmlColor:"#4CAF50",sx:{fontSize:27,my:.5,ml:.5}}):Object(ee.jsx)(mc.a,{htmlColor:"#e91e63",sx:{fontSize:27,my:.5,ml:.5}})}),Object(ee.jsx)(_.a,{primary:e})]},t)}))})]}),Object(ee.jsx)(na.a,{className:"free-btn btn",variant:"outlined",disabled:e.isCurrent,sx:{py:1.4,borderRadius:25,boxShadow:5},onClick:e.action,children:"Pick free plan"})]})},fc=function(){var e=y.a.useState(500),t=Object(x.a)(e,2),a=t[0],n=t[1],c=Object(v.useState)(""),r=Object(x.a)(c,2),s=r[0],o=r[1],d=Object(v.useState)([]),j=Object(x.a)(d,2),p=j[0],b=j[1],h=Object(u.g)(),m=$a(),O=m.state,f=m.dispatch,g=null===O||void 0===O?void 0:O.customerId;Object(v.useEffect)((function(){if(O.subscriptions){var e,t,a,c=Object(ma.a)(null===O||void 0===O||null===(e=O.subscriptions)||void 0===e?void 0:e.data);try{for(c.s();!(a=c.n()).done;){var r=a.value;if("active"===r.status){t=r;break}}}catch(l){c.e(l)}finally{c.f()}var s=t?t.plan.id:"",i=t?t.quantity:0;o(s),n(i)}}),[O]),Object(v.useEffect)((function(){(function(){var e=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.get("".concat(Ze,"/subscription/config"));case 2:t=e.sent,a=t.data,console.log(a),b(a.prices);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var S=function(e,t){n(t)},w=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var c,r,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n<=0)){e.next=3;break}return alert("Please select atlest one user"),e.abrupt("return");case 3:return e.prev=3,c={headers:{"Content-Type":"application/json"}},r={customerId:g,priceId:t.id,quantity:n},e.next=8,qe.a.post("".concat(Ze,"/create/subscription"),r,c);case 8:s=e.sent,o=s.data,console.log(o),(l=o.clientSecret)?(f({type:"SELECT_PRODUCT",payload:{cart:{product:t,clientSecret:l}}}),"Free Plan"===t.product.name&&window.location.reload(),h("/subscribe",{state:{quantity:a}})):(console.log("Cannot create Subscription"),f({type:"SELECT_PRODUCT",payload:{cart:{product:t,clientSecret:l}}}),console.log("Here"),"Free Plan"===t.product.name&&window.location.reload()),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),console.log(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(ee.jsxs)(E.a,{sx:{p:2},children:[Object(ee.jsxs)(E.a,{sx:{mt:2,mb:5},children:[Object(ee.jsx)(fe.a,{variant:"h2",sx:{textAlign:"center"},children:"Choose your plan"}),Object(ee.jsx)(fe.a,{vanriant:"h6",sx:{textAlign:"center",mt:2,letterSpacing:.6,color:"gray"},children:"Select one of our plans below as per your convenience"})]}),Object(ee.jsx)(E.a,{className:"card-container",sx:{mt:6},children:p.map((function(e){return Object(ee.jsxs)(E.a,{children:["Pro Plan"===e.product.name&&Object(ee.jsx)(bc,{value:a,handleValueChange:S,isCurrent:s===e.id,action:function(){return w(e,a)}}),"Free Plan"===e.product.name&&Object(ee.jsx)(Oc,{isCurrent:s===e.id,action:function(){return w(e,1)}})]},e.id)}))})]})},xc=a(237),gc=a(85),vc=a(150),yc=a.n(vc);var Sc=function(e){var t=e.handleBack,a=e.handleSubmit,n=e.quantity,c=$a().state;return console.log(c),Object(ee.jsxs)(E.a,{children:[Object(ee.jsxs)(Ee.a,{container:!0,spacing:3,children:[Object(ee.jsx)(Ee.a,{item:!0,xs:12,children:Object(ee.jsx)("h4",{children:"Enter Card Details"})}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,children:Object(ee.jsx)(E.a,{children:Object(ee.jsx)(gc.CardElement,{})})})]}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,children:Object(ee.jsxs)(E.a,{mt:5,alignItems:"center",justifyContent:"space-between",display:"flex",children:[Object(ee.jsx)(na.a,{startIcon:Object(ee.jsx)(yc.a,{}),onClick:t,children:"Go Back"}),Object(ee.jsx)(na.a,{type:"submit",variant:"contained",onClick:a,sx:{py:1.2,fontSize:14,px:"40px"},children:"PAY  $".concat(n)})]})})]})},wc=[{name:"Afghanistan",code:"AF"},{name:"\xc5land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People'S Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];var Cc=function(e){var t,a=$a().state,n=null===a||void 0===a||null===(t=a.cart)||void 0===t?void 0:t.details,c=Object(v.useState)(n||{name:"",address:"",city:"",state:"",country:""}),r=Object(x.a)(c,2),s=r[0],o=r[1],i=function(e){o(Object(w.a)(Object(w.a)({},s),{},Object(g.a)({},e.target.name,e.target.value)))};return Object(ee.jsxs)(E.a,{children:[Object(ee.jsxs)(Ee.a,{container:!0,spacing:3,children:[Object(ee.jsx)(Ee.a,{item:!0,xs:12,children:Object(ee.jsx)("h4",{children:"Payment Details"})}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,children:Object(ee.jsx)(Le.a,{autoFocus:!0,fullWidth:!0,label:"Card Holder Name",name:"name",required:!0,value:s.name,onChange:i})}),Object(ee.jsx)(Ee.a,{item:!0,md:12,xs:12,children:Object(ee.jsx)("h4",{children:"Billing Details"})}),Object(ee.jsx)(Ee.a,{item:!0,md:6,xs:12,children:Object(ee.jsx)(Le.a,{fullWidth:!0,label:"Street Address",name:"address",required:!0,value:s.address,onChange:i})}),Object(ee.jsx)(Ee.a,{item:!0,md:6,xs:12,children:Object(ee.jsxs)(Ea.a,{fullWidth:!0,children:[Object(ee.jsx)(La.a,{id:"country-select",children:"Country"}),Object(ee.jsx)(Ta.a,{required:!0,labelId:"country-select",name:"country",value:s.country,label:"Country",onChange:i,children:wc.map((function(e){return Object(ee.jsx)(Me.a,{sx:{py:1},value:e.code,children:"".concat(e.name," - ").concat(e.code)},e.code)}))})]})}),Object(ee.jsx)(Ee.a,{item:!0,md:6,xs:12,children:Object(ee.jsx)(Le.a,{fullWidth:!0,label:"State",name:"state",required:!0,value:s.state,onChange:i})}),Object(ee.jsx)(Ee.a,{item:!0,md:6,xs:12,children:Object(ee.jsx)(Le.a,{fullWidth:!0,label:"City",name:"city",required:!0,value:s.city,onChange:i})})]}),Object(ee.jsx)(Ee.a,{item:!0,xs:12,children:Object(ee.jsx)(E.a,{mt:5,alignItems:"center",justifyContent:"space-between",display:"flex",children:Object(ee.jsx)(na.a,{type:"submit",variant:"contained",onClick:function(){return function(t){if(Object.values(t).includes(""))return e.setErrorMsg("All Fields are required"),void e.setSnackOpen(!0);e.handleNext(t)}(s)},sx:{width:"100%",py:1.5},children:"Continue to Pay"})})})]})},kc=a(503),Nc=function(e){var t=Object(v.useState)(0),a=Object(x.a)(t,2),n=a[0],c=a[1],r=Object(v.useState)(0),s=Object(x.a)(r,2),o=s[0],i=s[1],l=Object(u.g)();return Object(v.useEffect)((function(){if(!1!==e.open){var t=setInterval((function(){c((function(e){return e+5}))}),250);return i(t),function(){return clearInterval(t)}}}),[e]),Object(v.useEffect)((function(){n>100&&(clearInterval(o),l("/app/pricing",{replace:!0}))}),[n]),console.log("Here"),Object(ee.jsx)(un.a,{open:e.open,onClose:e.handleClose,children:Object(ee.jsx)(jn.a,{children:Object(ee.jsxs)(E.a,{children:[Object(ee.jsx)("img",{src:"https://firebasestorage.googleapis.com/v0/b/evencloud-26d32.appspot.com/o/success.png?alt=media&token=14200909-edb3-4628-bfe5-36e346709737",alt:"Success Image",style:{width:"250px",height:"250px"}}),Object(ee.jsx)(kc.a,{variant:"determinate",value:n,color:"success"})]})})})},Dc=y.a.memo(Nc);function Ic(){var e=Object(gc.useStripe)(),t=Object(gc.useElements)(),a=$a(),n=a.state,c=a.dispatch,r=n.cart,s=Object(v.useState)(""),o=Object(x.a)(s,2),d=o[0],j=o[1],p=Object(v.useState)(!1),b=Object(x.a)(p,2),h=b[0],m=b[1],O=Object(v.useState)(!1),f=Object(x.a)(O,2),g=f[0],y=f[1],S=Object(v.useState)(null),w=Object(x.a)(S,2),C=w[0],k=w[1],N=Object(v.useState)(!1),D=Object(x.a)(N,2),I=D[0],A=D[1],L=Object(u.g)(),T=Object(u.f)(),P=T.state?T.state.quantity:0,_=function(){var a=Object(l.a)(i.a.mark((function a(c){var s,o,l,u,p,b;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c.preventDefault(),e&&t){a.next=3;break}return a.abrupt("return");case 3:return console.log(null===n||void 0===n?void 0:n.cart),a.next=6,e.confirmCardPayment(null===n||void 0===n||null===(s=n.cart)||void 0===s?void 0:s.clientSecret,{payment_method:{card:t.getElement(gc.CardElement),billing_details:{name:null===r||void 0===r?void 0:r.details.name,address:{line1:null===r||void 0===r?void 0:r.details.address,postal_code:(null===r||void 0===r?void 0:r.details.zip)||"38483",city:null===r||void 0===r||null===(o=r.details)||void 0===o?void 0:o.city,country:null===r||void 0===r||null===(l=r.details)||void 0===l?void 0:l.country}}}});case 6:u=a.sent,p=u.error,b=u.paymentIntent,p?(i=p.message,j("".concat(d,"\n\n").concat(i)),k(p.message),y(!0),console.log(p.message)):"succeeded"===b.status&&(console.log("Success"),A(!0));case 10:case"end":return a.stop()}var i}),a)})));return function(e){return a.apply(this,arguments)}}(),M=function(e,t){"clickaway"!==t&&(y(!1),k(null))};return Object(ee.jsxs)(E.a,{sx:{p:4,background:"#f0f2f5",minHeight:"100%"},children:[Object(ee.jsx)(E.a,{children:Object(ee.jsx)(na.a,{startIcon:Object(ee.jsx)(yc.a,{}),onClick:function(){return L("/app/pricing")},children:"Go Back"})}),Object(ee.jsxs)(E.a,{sx:{mt:2,mb:5},children:[Object(ee.jsx)(fe.a,{variant:"h2",sx:{textAlign:"center"},children:"Make a payment"}),Object(ee.jsx)(fe.a,{vanriant:"h6",sx:{textAlign:"center",mt:2,letterSpacing:.6,color:"gray"},children:"Fill the payment form with Billing Address, Card Holder Name and Card Details"})]}),Object(ee.jsxs)(Fe.a,{sx:{borderRadius:3,boxShadow:10,margin:"40px auto",backgroundColor:"background.paper",p:5,maxWidth:"600px",mt:8},children:[h&&Object(ee.jsx)(Sc,{handleBack:function(){m(!1)},handleSubmit:_,quantity:P}),!h&&Object(ee.jsx)(Cc,{handleNext:function(e){c({type:"PAYMENT_DETAILS",payload:{details:e}}),m(!0)},setErrorMsg:k,setSnackOpen:y})]}),Object(ee.jsx)(Dc,{open:I,handleClose:function(){A(!1)}}),null!==C&&Object(ee.jsx)(Ue.a,{open:g,autoHideDuration:4e3,onClose:M,anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(ee.jsx)(We.a,{onClose:M,severity:"error",sx:{width:"100%"},variant:"filled",children:C})})]})}var Ac=Object(xc.a)("pk_test_51LERE7SHgzLT4nCoLBiNHxLi1VA6lbqcTOnrkwtNlduP9Ht93k7NbY5OF4GXR8vdid3eig3lV1DAxS2XSshACkUe00hDCZvx5x"),Ec=function(){return Object(ee.jsx)(gc.Elements,{stripe:Ac,children:Object(ee.jsx)(Ic,{})})},Lc=[{path:"app",element:Object(ee.jsx)(Ce,{}),children:[{path:"dashboard",element:Object(ee.jsx)(aa,{})},{path:"manage-devices",element:Object(ee.jsx)(Nn,{})},{path:"manage-hotspots",element:Object(ee.jsx)(Tn,{})},{path:"manage-groups",element:Object(ee.jsx)(Kn,{})},{path:"manage-admins",element:Object(ee.jsx)(cc,{})},{path:"pricing",element:Object(ee.jsx)(fc,{})},{path:"notifications",element:Object(ee.jsx)(ln,{})},{path:"reports",element:Object(ee.jsx)(sn,{})},{path:"locationview/:phoneNumber/:requestId",element:Object(ee.jsx)(it,{})},{path:"profile",element:Object(ee.jsx)(Fn,{})},{path:"/admin/reports",element:Object(ee.jsx)(sc,{})},{path:"*",element:Object(ee.jsx)(u.a,{to:"/404"})}]},{path:"/",element:Object(ee.jsx)(Ae,{}),children:[{path:"login",element:Object(ee.jsx)(ua,{})},{path:"register",element:Object(ee.jsx)(pa,{})},{path:"subscribe",element:Object(ee.jsx)(Ec,{})},{path:"/admin/change-password",element:Object(ee.jsx)(ic,{})},{path:"404",element:Object(ee.jsx)(da,{})},{path:"/",element:Object(ee.jsx)(u.a,{to:"/app/dashboard"})},{path:"*",element:Object(ee.jsx)(u.a,{to:"/404"})}]}],Tc=(a(366),function(){var e=Object(u.i)(Lc),t=Object(u.g)(),a=Object(s.b)(),n=sessionStorage.getItem("authToken"),c=sessionStorage.getItem("userData")?JSON.parse(sessionStorage.getItem("userData")):null,r=sessionStorage.getItem("adminData")?JSON.parse(sessionStorage.getItem("adminData")):null;return Object(v.useEffect)(Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r&&null!==c&&(a(Vt(c.uid)),a(Kt(c.uid)),a(ea(c.uid)),a(Xt(c.uid))),null===r||null===c){e.next=8;break}return e.next=4,qe.a.get("".concat(Ze,"/get/admin/").concat(r.email));case 4:t=e.sent,n=t.data,a(Yt({createdBy:c.uid,adminGroups:n.groups})),a(qt({createdBy:c.uid,adminGroups:n.groups}));case 8:case"end":return e.stop()}}),e)}))),[a]),Object(v.useEffect)((function(){n||t("/login")}),[n]),Object(ee.jsx)(d.a,{injectFirst:!0,children:Object(ee.jsxs)(j.a,{theme:f,children:[Object(ee.jsx)(m,{}),e]})})}),Pc=a(126),_c=a(239),Mc=a(238),Gc=Object(Pc.combineReducers)({hotspots:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hotspotList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return{hotspotList:t.payload};case mt:return{error:t.payload,hotspotList:[]};case pt:var a=t.payload;console.log(a);var n=e.hotspotList.find((function(e){return e._id===a._id}));return n?Object(w.a)(Object(w.a)({},e),{},{hotspotList:e.hotspotList.map((function(e){return e._id===n._id?a:e})),success:"Hotspot created succssfully"}):Object(w.a)(Object(w.a)({},e),{},{hotspotList:[].concat(Object(ba.a)(e.hotspotList),[a]),success:"Hotspot created succssfully"});case bt:return{hotspotList:Object(ba.a)(e.hotspotList),error:t.payload};case Ot:var c=t.payload;console.log(c);var r=e.hotspotList.find((function(e){return e._id===c._id}));return r?Object(w.a)(Object(w.a)({},e),{},{hotspotList:e.hotspotList.map((function(e){return e._id===r._id?c:e})),success:"Hotspot updated succssfully"}):Object(w.a)(Object(w.a)({},e),{},{hotspotList:[].concat(Object(ba.a)(e.hotspotList),[c]),success:"Hotspot updated succssfully"});case ft:return{hotspotList:Object(ba.a)(e.hotspotList),error:t.payload};case xt:return Object(w.a)(Object(w.a)({},e),{},{hotspotList:e.hotspotList.filter((function(e){return e._id!==t.payload})),success:"Hotspot deleted succssfully"});case gt:return{error:t.payload,hotspotList:Object(ba.a)(e.hotspotList)};default:return e}},groups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{groupList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return{groupList:t.payload};case wt:return{error:t.payload,groupList:[]};case vt:var a=t.payload,n=e.groupList.find((function(e){return e._id===a._id}));return n?Object(w.a)(Object(w.a)({},e),{},{groupList:e.groupList.map((function(e){return e._id===n._id?a:e})),success:"Group created succssfully"}):Object(w.a)(Object(w.a)({},e),{},{groupList:[].concat(Object(ba.a)(e.groupList),[a]),success:"Group created succssfully"});case yt:return{groupList:Object(ba.a)(e.groupList),error:t.payload};case Ct:var c=t.payload,r=e.groupList.find((function(e){return e._id===c._id}));return r?Object(w.a)(Object(w.a)({},e),{},{groupList:e.groupList.map((function(e){return e._id===r._id?c:e})),success:"Group created succssfully"}):Object(w.a)(Object(w.a)({},e),{},{groupList:[].concat(Object(ba.a)(e.groupList),[c]),success:"Group created succssfully"});case kt:return{groupList:Object(ba.a)(e.groupList),error:t.payload};case Nt:return Object(w.a)(Object(w.a)({},e),{},{groupList:e.groupList.filter((function(e){return e._id!==t.payload})),success:"Group deleted succssfully"});case Dt:return{error:t.payload,groupList:Object(ba.a)(e.groupList)};default:return e}},admins:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{adminList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Et:return{adminList:t.payload};case Lt:return{error:t.payload,adminList:[]};case It:var a=t.payload,n=e.adminList.find((function(e){return e._id===a._id}));return n?Object(w.a)(Object(w.a)({},e),{},{adminList:e.adminList.map((function(e){return e._id===n._id?a:e})),success:"Admin created succssfully"}):Object(w.a)(Object(w.a)({},e),{},{adminList:[].concat(Object(ba.a)(e.adminList),[a]),success:"Admin created succssfully"});case At:return{adminList:Object(ba.a)(e.adminList),error:t.payload};case Tt:var c=t.payload,r=e.adminList.find((function(e){return e._id===c._id}));return r?Object(w.a)(Object(w.a)({},e),{},{adminList:e.adminList.map((function(e){return e._id===r._id?c:e})),success:"Admin updated succssfully"}):Object(w.a)(Object(w.a)({},e),{},{adminList:[].concat(Object(ba.a)(e.adminList),[c]),success:"Admin updated succssfully"});case Pt:return{adminList:Object(ba.a)(e.adminList),error:t.payload};case _t:return Object(w.a)(Object(w.a)({},e),{},{adminList:e.adminList.filter((function(e){return e._id!==t.payload})),success:"Admin deleted successfully"});case Mt:return{error:t.payload,hotspotList:Object(ba.a)(e.adminList)};default:return e}},devices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{deviceList:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return{deviceList:t.payload};case zt:return{error:t.payload,deviceList:[]};case Gt:var a=t.payload,n=e.deviceList.find((function(e){return e._id===a._id}));return n?Object(w.a)(Object(w.a)({},e),{},{deviceList:e.deviceList.map((function(e){return e._id===n._id?a:e})),success:"Device added succssfully"}):Object(w.a)(Object(w.a)({},e),{},{deviceList:[].concat(Object(ba.a)(e.deviceList),[a]),success:"Device added succssfully"});case Ft:return{deviceList:Object(ba.a)(e.deviceList),error:t.payload};case Ut:var c=t.payload;console.log(c);var r=e.deviceList.find((function(e){return e._id===c._id}));return r?Object(w.a)(Object(w.a)({},e),{},{deviceList:e.deviceList.map((function(e){return e._id===r._id?c:e})),success:"Device updated succssfully"}):Object(w.a)(Object(w.a)({},e),{},{deviceList:[].concat(Object(ba.a)(e.deviceList),[c]),success:"Device updated succssfully"});case Wt:return{deviceList:Object(ba.a)(e.deviceList),error:t.payload};case Bt:return Object(w.a)(Object(w.a)({},e),{},{deviceList:e.deviceList.filter((function(e){return e._id!==t.payload})),success:"Device deleted succssfully"});case Rt:return{error:t.payload,deviceList:Object(ba.a)(e.deviceList)};default:return e}}}),Fc={hotspots:{hotspotList:sessionStorage.getItem("hotspotList")?JSON.parse(sessionStorage.getItem("hotspotList")):[]},groups:{groupList:sessionStorage.getItem("groupList")?JSON.parse(sessionStorage.getItem("groupList")):[]},admins:{adminList:sessionStorage.getItem("adminList")?JSON.parse(sessionStorage.getItem("adminList")):[]},devices:{deviceList:sessionStorage.getItem("deviceList")?JSON.parse(sessionStorage.getItem("deviceList")):[]}},Hc=[_c.a],zc=Object(Pc.createStore)(Gc,Fc,Object(Mc.composeWithDevTools)(Pc.applyMiddleware.apply(void 0,Hc)));c.a.render(Object(ee.jsx)(Xa,{children:Object(ee.jsx)(Qa,{children:function(e){return e.state.isInitialized&&Object(ee.jsx)(s.a,{store:zc,children:Object(ee.jsx)(r.a,{children:Object(ee.jsx)(Tc,{})})})}})}),document.getElementById("root"))}},[[367,1,2]]]);
//# sourceMappingURL=main.6175f67b.chunk.js.map